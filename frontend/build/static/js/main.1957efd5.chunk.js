(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1010:function(e,t,a){},1011:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(44),o=a.n(r),i=a(17),l=a(57),c=(a(79),a(40)),u=a.n(c),d=a(6),m=a(293),p=a(310),h=a(294);a(74).config();var f={apiUrl:"https://glazewave.com",region:"us-east-1",userPool:"us-east-1_y260v7f9r",clientId:"3k564gdu8cp3aj7iu8tadujs1v",userPoolBaseUri:"https://glazewave.auth.us-east-1.amazoncognito.com",callbackUri:"https://glazewave.com/login",signoutUri:"https://glazewave.com/logout",tokenScopes:["email"],apiUri:"https://glazewave.com"},g=a(28),v=a.n(g),b=a(10),E=a(12),S=a(11),_=a(99),y=a(14),N=a(82),O=function(){function e(t){var a=this;Object(b.a)(this,e),this.REQUEST_TYPE="BASE",this.getHost=function(){return v.a.host+v.a.port},this.getEndpoint=function(){return a.endpoint},this.get=function(e){var t=e.wheres,n=void 0===t?[]:t,s=e.withs,r=void 0===s?[]:s,o=e.limit,i=void 0===o?20:o,l=e.page,c=void 0===l?0:l,u=e.label,d=void 0===u?"":u,m=e.orderBy,p=void 0===m?"":m,h=e.onSuccess,f=void 0===h?function(){}:h,g=e.onFailure,v=void 0===g?function(e){return a.onFailure(e)}:g;return a.apiAction({url:a.getEndpoint()+"?"+a.getWhereString(n)+"&"+a.getWithString(r)+"&limit="+i+"&order_by="+p+"&page="+c,onSuccess:f,onFailure:v,label:a.getlabel(d,"GET")})},this.getOne=function(e){var t=e.id,n=void 0===t?null:t,s=e.withs,r=void 0===s?[]:s,o=e.label,i=void 0===o?"":o,l=e.onSuccess,c=void 0===l?function(){}:l,u=e.onFailure,d=void 0===u?function(e){return a.onFailure(e)}:u;return a.apiAction({url:a.getEndpoint()+"/"+n+"?"+a.getWithString(r),onSuccess:c,onFailure:d,label:i})},this.create=function(e){var t=e.data,n=void 0===t?{}:t,s=e.hdrs,r=void 0===s?{}:s,o=e.label,i=void 0===o?"":o,l=e.onSuccess,c=void 0===l?function(){}:l,u=e.onFailure,m=void 0===u?function(e){return a.onFailure(e)}:u;Object(d.a)(Object(d.a)({},a.session.headers),r);return a.apiAction({data:n,url:a.getEndpoint(),method:"POST",onSuccess:c,onFailure:m,label:i})},this.delete=function(e){var t=e.id,n=void 0===t?null:t,s=e.label,r=void 0===s?"":s,o=e.onSuccess,i=void 0===o?function(){}:o,l=e.onFailure,c=void 0===l?function(e){return a.onFailure(e)}:l;return a.apiAction({url:a.getEndpoint()+"/"+n,method:"DELETE",onSuccess:i,onFailure:c,label:r})},this.update=function(e){var t=e.id,n=void 0===t?null:t,s=e.label,r=void 0===s?"":s,o=e.data,i=void 0===o?{}:o,l=e.onSuccess,c=void 0===l?function(){}:l,u=e.onFailure,d=void 0===u?function(e){return a.onFailure(e)}:u;return a.apiAction({url:a.getEndpoint()+"/"+n,method:"PUT",onSuccess:c,onFailure:d,label:r,data:i})},this.getWithString=function(e){var t="";return e.forEach((function(e){t+="with[]=".concat(e,"&")})),t.slice(0,t.length-1)},this.getWhereString=function(e){return N.stringify(e)},this.onFailure=function(e){return console.log("error",e),{type:"API_FAILED"}},this.apiAction=function(e){var t=e.url,n=void 0===t?"":t,s=e.method,r=void 0===s?"GET":s,o=e.data,i=void 0===o?null:o,l=e.accessToken,c=void 0===l?a.session.jwt:l,u=e.onSuccess,d=void 0===u?function(){}:u,m=e.onFailure,p=void 0===m?function(){}:m,h=e.label,f=void 0===h?"":h,g=e.headersOverride;return{type:"API",payload:{url:n,method:r,data:i,accessToken:c,onSuccess:d,onFailure:p,label:f,headersOverride:void 0===g?null:g}}},this.session=t}return Object(y.a)(e,[{key:"getlabel",value:function(e,t){if(""===e)return t+"_"+this.REQUEST_TYPE}}]),e}();O.createFormRequest=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new FormData,a=0,n=Object.entries(e);a<n.length;a++){var s=Object(_.a)(n[a],2),r=s[0],o=s[1];t.append(r,o)}return t};var w=O,I=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).REQUEST_TYPE="USER",n.updateProfileImage=function(e){return n.endpoint="/api/user/images",n.create(e)},n.getAverages=function(e){var t=e.id,a=void 0===t?null:t,s=e.withs,r=void 0===s?[]:s,o=e.label,i=void 0===o?"":o,l=e.onSuccess,c=void 0===l?function(){}:l,u=e.onFailure,d=void 0===u?function(e){return n.onFailure(e)}:u;return n.apiAction({url:n.getEndpoint()+"/"+a+"/average?"+n.getWithString(r),onSuccess:c,onFailure:d,label:i})},n.endpoint="/api/user",n}return a}(w),j=function(e){return{type:"USER_LOADED",payload:e}},C=function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return j(e)}});a(new I(e).getOne(s))}},A=function(){var e;return{getService:function(){return e||(e=this)},setToken:function(e){localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token)},getAccessToken:function(){return localStorage.getItem("access_token")},getRefreshToken:function(){return localStorage.getItem("refresh_token")},clearToken:function(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}}}(),k=a(41);function D(e){return function(t){return U(e).then((function(){return B(t)})).then((function(e){z(e),t({type:"SET_SESSION",session:e})}))}}h.config.region=f.region;var R=function(){var e=f.userPoolBaseUri.replace("https://","").replace("http://","");return new m.CognitoAuth({UserPoolId:f.userPool,ClientId:f.clientId,AppWebDomain:e,TokenScopesArray:f.tokenScopes,RedirectUriSignIn:f.callbackUri,RedirectUriSignOut:f.signoutUri})},x=function(){return T().getCurrentUser()},T=function(){return new p.a({UserPoolId:f.userPool,ClientId:f.clientId})},U=function(e){return new Promise((function(t,a){var n=R();n.userhandler={onSuccess:function(e){t(e)},onFailure:function(e){a(new Error("Failure parsing Cognito web response: "+e))}},n.parseCognitoWebResponse(e)}))},B=function(e){return new Promise((function(t,a){x().getSession((function(n,s){!n&&s?k.get(v.a.host+v.a.port+"/api/user/firstOrNew?username="+s.idToken.payload["cognito:username"]+"&email="+s.idToken.payload.email+"&first_name="+s.idToken.payload.given_name+"&last_name="+s.idToken.payload.family_name).then((function(a){var n=P(a.data.id,s);A.setToken({access_token:n.jwt,refresh_token:null}),n.user=Object(d.a)(Object(d.a)({},n.user),a.data[0]),e(C(n,{wheres:{email:s.idToken.payload.email}})),t(n)})):a(new Error("Failure getting Cognito session: "+n))}))}))},P=function(e,t){var a={user:{id:e,userName:t.idToken.payload["cognito:username"],email:t.idToken.payload.email},jwt:t.accessToken.jwtToken,groups:t.idToken.payload["cognito:groups"],isAdmin:t.idToken.payload["cognito:groups"]instanceof Array&&-1!==t.idToken.payload["cognito:groups"].indexOf("Admin"),expiration:t.accessToken.payload.exp,isLoggedIn:!0};return a.user=Object(d.a)({},a.user),a},L=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(e,t){var a=R();a.userhandler={onSuccess:function(t){var a=P(je.getState().session.user.id,t);A.setToken({access_token:a.jwt,refresh_token:null}),z(a),je.dispatch({type:"SET_SESSION",session:a}),e(a)},onFailure:function(e){console.log("cognito refresh error",e),t(e)}},a.getSession()}))},M=function(){return"".concat(f.userPoolBaseUri,"/login?response_type=code&client_id=").concat(f.clientId,"&redirect_uri=").concat(f.callbackUri)},F=function(){G(),R().signOut()};function z(e){localStorage.setItem("x-token",JSON.stringify(e))}function Y(){if(localStorage.getItem("x-token")){var e=JSON.parse(localStorage.getItem("x-token")),t=u.a.unix(e.expiration).valueOf(),a=u()().valueOf(),n=u.a.unix(e.expiration).subtract(5,"minutes").valueOf();if(console.log("token expires @",u.a.unix(e.expiration).format("MMMM Do YYYY, h:mm:ss a")),console.log("current time is",u()().format("MMMM Do YYYY, h:mm:ss a")),console.log("update time is",u.a.unix(e.expiration).subtract(5,"minutes").format("MMMM Do YYYY, h:mm:ss a")),console.log("cookie expues",a,t,n),a>n)return L().then((function(e){return!0})).catch((function(e){return G()})),e;if(t>a)return e;L().then((function(e){return console.log("session data",e)})).catch((function(e){return G()}))}return!1}function G(){return localStorage.getItem("x-token")&&localStorage.removeItem("x-token"),!1}var H=Y(),V=H||{isLoggedIn:!1,isAdmin:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SESSION":return Object.assign({},t.session,{isLoggedIn:!0});case"CLEAR_SESSION":return V;default:return e}},q=[],K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return t.type,e},Q={selected:{},data:[],loaded:!1,created:!1},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_BOARD":return Object(d.a)(Object(d.a)({},e),{selected:t.payload});case"SET_USER_BOARDS":return Object(d.a)(Object(d.a)({},e),{data:t.payload,loaded:!0});case"USER_BOARD_CREATED":return Object(d.a)(Object(d.a)({},e),{data:e.data.concat(t.payload),created:t.payload});case"USER_BOARD_DELETED":var a=e.data.filter((function(e){return e.id!==parseInt(t.payload)}));return Object(d.a)(Object(d.a)({},e),{data:a});case"USER_BOARD_UPDATED":return Object(d.a)(Object(d.a)({},e),{selected:Object(d.a)(Object(d.a)({},e.selected),t.payload)});case"USER_BOARDS_CLEARED":return Q;case"USER_BOARD_CREATED_CLEARED":return Object(d.a)(Object(d.a)({},e),{created:!1});default:return e}},X=[],Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return t.type,e},$={selected:{},data:[],created:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SESSION_LOADED":return Object(d.a)(Object(d.a)({},e),{selected:t.payload});case"USER_SESSION_CLEARED":return Object(d.a)(Object(d.a)({},e),{selected:{}});case"SET_USER_SESSIONS":return Object(d.a)(Object(d.a)({},e),{data:t.payload});case"USER_SESSION_DELETED":var a=e.data.filter((function(e){return e.id!==parseInt(t.payload)}));return Object(d.a)(Object(d.a)({},e),{data:a});case"USER_SESSION_CREATED":return Object(d.a)(Object(d.a)({},e),{data:e.data.concat(t.payload),created:t.payload});case"DELETE_USER_SESSION":return e.filter((function(e){return e.id!==t.payload}));case"USER_SESSION_UPDATED":return Object(d.a)(Object(d.a)({},e),{selected:Object(d.a)(Object(d.a)({},e.selected),t.payload)});case"USER_SESSION_CREATED_CLEARED":return Object(d.a)(Object(d.a)({},e),{created:!1});case"USER_SESSIONS_CLEARED":return $;default:return e}},te={data:{},averages:{}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case"USER_LOADED":return Object(d.a)(Object(d.a)({},a),{data:t.payload});case"USER_IMAGE_UPDATED":return Object(d.a)(Object(d.a)({},a),{data:{profile_img:t.payload.data}});case"USER_AVERAGES_LOADED":return console.log("user_averages_loaded"),Object(d.a)(Object(d.a)({},a),{averages:Object(d.a)({},t.payload)});default:return e}},ne={count:0,authorized:!0},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_START":return Object(d.a)(Object(d.a)({},e),{count:e.count+1});case"API_END":return Object(d.a)(Object(d.a)({},e),{count:e.count-1});case"API_401":return Object(d.a)(Object(d.a)({},e),{authorized:!1});default:return e}},re={selected:{},data:[]},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOARDS_LOADED":return Object(d.a)(Object(d.a)({},e),{data:t.payload});default:return e}};a(74).config();var ie="https://glazewave.s3.amazonaws.com/",le=[{id:1,original:"/img/session_default_lg.png",thumbnail:"/img/session_default_lg.png"}],ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SESSION_IMAGES_LOADED":return t.payload.length>0?de(t.payload):le;case"USER_SESSION_IMAGES_CREATED":return ue(e).concat(de(t.payload));case"USER_SESSION_IMAGE_DELETED":var a=e.filter((function(e){return e.id!==parseInt(t.payload)}));return a.length?a:le;default:return e}},ue=function(e){return e.filter((function(e){return 1!==e.id}))},de=function(e){var t=[];return e.forEach((function(e){t.push({id:e.id,original:ie+e.name,thumbnail:ie+e.name})})),t},me=[{id:1,original:"/img/board_default_lg.png",thumbnail:"/img/board_default_lg.png"}],pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_BOARD_IMAGES_LOADED":return t.payload.length>0?fe(t.payload):me;case"USER_BOARD_IMAGES_CREATED":return he(e).concat(fe(t.payload));case"USER_BOARD_IMAGE_DELETED":var a=e.filter((function(e){return e.id!==parseInt(t.payload)}));return a.length?a:me;default:return e}},he=function(e){return e.filter((function(e){return 1!==e.id}))},fe=function(e){var t=[];return e.forEach((function(e){t.push({id:e.id,original:ie+e.name,thumbnail:ie+e.name})})),t},ge={selected:{},data:[]},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHAPERS_LOADED":return Object(d.a)(Object(d.a)({},e),{data:t.payload});default:return e}},be={selected:{},data:[]},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORMGLASS_LOADED":return Object(d.a)(Object(d.a)({},e),{data:t.payload});default:return e}},Se=Object(l.combineReducers)({api:se,boards:oe,session_images:ce,shapers:ve,user_board:K,user_boards:J,user_board_images:pe,user_session:Z,user_sessions:ee,session:W,stormglass:Ee,user:ae}),_e=a(182),ye=a(66),Ne=a(41),Oe=a.n(Ne),we=function(e){var t=e.dispatch;return function(e){return function(a){if(e(a),"API"===a.type){var n=a.payload,s=n.url,r=n.method,o=n.data,i=(n.accessToken,n.onSuccess),l=n.onFailure,c=n.label,u=n.headers,d=["GET","DELETE"].includes(r)?"params":"data";Oe.a.defaults.baseURL=v.a.host+v.a.port||"",Oe.a.defaults.headers.common["Content-Type"]="application/json",Oe.a.defaults.headers.common.Authorization="Bearer ".concat(A.getAccessToken()),Oe.a.interceptors.response.use((function(e){return e}),(function(e){var a=e.config;if(401===e.response.status){if(!a._retry)return console.log("trying agaibn",a),a._retry=!0,L().then((function(e){return A.setToken(e.jwt),Oe.a.defaults.headers.common.Authorization="Bearer ".concat(e.jwt),Oe()(a)}));t(function(e){return{type:"API_401",error:e}}("unauthorized"))}return Promise.reject(e)})),c&&t(function(e){return{type:"API_START",payload:e}}(c)),Oe.a.request(Object(ye.a)({url:s,method:r,headers:u},d,o)).then((function(e){var a=e.data;t(i(a))})).catch((function(e){console.log("error",e),t(function(e){return{type:"API_ERROR",error:e}}(e)),t(l(e)),e.response&&403===e.response.status&&t(function(e){return{type:"ACCESS_DENIED",payload:{url:e}}}(window.location.pathname))})).finally((function(){c&&t(function(e){return{type:"API_END",payload:e}}(c))}))}}}};a(74).config();var Ie=l.compose,je=Object(l.createStore)(Se,Ie(Object(l.applyMiddleware)(_e.default,we))),Ce=(a(750),a(46)),Ae=(a(751),a(35)),ke=(a(752),function(e){e.preventDefault(),F()}),De=function(e){return s.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark"},s.a.createElement("button",{type:"button",className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarCollapse"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarCollapse"},s.a.createElement("div",{className:"navbar-nav"},s.a.createElement("a",{className:"navbar-brand",href:"/"},s.a.createElement("img",{src:"/img/LogoMakr_4GvwRg.png",alt:"glazewave",height:"150",width:"150"})),e.session.isLoggedIn&&s.a.createElement(Ae.b,{className:"nav-link",to:"/user/dashboard"},"Dashboard"),!1,e.session.isLoggedIn&&s.a.createElement(Ae.b,{className:"nav-link",to:"/session"},"Sessions"),e.session.isLoggedIn&&s.a.createElement(Ae.b,{className:"nav-link",to:"/board"},"Boards"),!1,!1),s.a.createElement("div",{className:"navbar-nav ml-auto"},e.session.isLoggedIn?s.a.createElement("span",null,s.a.createElement("span",{className:"white-txt"},"Hello ",e.username,"\xa0\xa0"),s.a.createElement("span",null,s.a.createElement("a",{className:"Home-link",href:"#",onClick:ke},"Sign out")," ")):s.a.createElement("a",{className:"Home-link",href:M()},"Sign in"))))},Re=a(313),xe=function(e){var t=e.component,a=(e.roles,e.session),n=Object(Re.a)(e,["component","roles","session"]);return s.a.createElement(Ce.b,Object.assign({},n,{render:function(e){return a.isLoggedIn?s.a.createElement(t,e):s.a.createElement(Ce.a,{to:{pathname:"/",state:{from:e.location}}})}}))},Te=(a(233),function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"Home"},s.a.createElement("header",{className:"Home-header"},s.a.createElement("p",null,"404 Page Not Found")))}}]),a}(n.Component)),Ue=Object(i.b)()(Te);var Be=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).onSignOut=function(e){e.preventDefault(),F()},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn&&this.props.history.push("/user/dashboard")}},{key:"render",value:function(){return s.a.createElement("div",{className:"Home"},s.a.createElement("header",{className:"background home-background"},s.a.createElement("div",{className:"container container-home"},s.a.createElement("div",{className:"row align-items-center my-5"},s.a.createElement("div",{className:"col-lg-7"},s.a.createElement("img",{className:"img-fluid rounded mb-4 mb-lg-0",src:"/img/glazewave_index.png",alt:""})),s.a.createElement("div",{className:"col-lg-5"},s.a.createElement("h1",{className:"font-weight-light"},s.a.createElement("img",{className:"align-left",src:"/img/LogoMakr_4GvwRg.png",alt:"glazewave"})),s.a.createElement("p",null,"Get Stoked. Get Wet. Get Smart. Get Better."))),s.a.createElement("div",{className:"card index-cta my-5 py-4 text-center bg-primary"},s.a.createElement("p",null,"A Free online tool to track your time getting wet and gain analytics into your performance!"),s.a.createElement("p",null,s.a.createElement("a",{className:"btn btn-primary",href:M()},"Sign Up!"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4 mb-5"},s.a.createElement("div",{className:"card h-100"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",{className:"card-title"},"Track Sessions"),s.a.createElement("img",{src:ie+"site/session_example.png"}),s.a.createElement("p",{className:"card-text"},"Track and rate your session then use the stats to decide the best board and location for the swell!")),s.a.createElement("div",{className:"card-footer"},s.a.createElement("a",{className:"btn btn-primary",href:M()},"Sign Up!")))),s.a.createElement("div",{className:"col-md-4 mb-5"},s.a.createElement("div",{className:"card h-100"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",{className:"card-title"},"Store Boards"),s.a.createElement("img",{src:ie+"site/board_example.png"}),s.a.createElement("p",{className:"card-text"},"Show your quiver off to friends and the public while keeping track of how each performs in different conditions!.")),s.a.createElement("div",{className:"card-footer"},s.a.createElement("a",{className:"btn btn-primary",href:M()},"Sign Up!")))),s.a.createElement("div",{className:"col-md-4 mb-5"},s.a.createElement("div",{className:"card h-100"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",{className:"card-title"},"Stow Photos"),s.a.createElement("p",{className:"card-text"},"Create image galleries with your best photos from each session."),s.a.createElement("h3",{className:"card-title"},"Get Reports"),s.a.createElement("p",{className:"card-text"},"See your local conditions and nearest spots to surf!"),s.a.createElement("h3",{className:"card-title"},"View & Share"),s.a.createElement("p",{className:"card-text"},"Privacy controls let each user share and view boards and sessions!",s.a.createElement("br",null),s.a.createElement("i",null,"(Only if you choose of course. We'll always take your privacy seriously)"))),s.a.createElement("div",{className:"card-footer"},s.a.createElement("a",{href:"#",className:"btn btn-primary btn-sm"},"Sign Up!"))))))))}}]),a}(n.Component),Pe=Object(i.b)((function(e){return{session:e.session}}),(function(e){return{}}))(Be);var Le=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"componentDidMount",value:function(){(this.props.location.hash||this.props.location.search)&&this.props.initSessionFromCallbackURI(window.location.href)}},{key:"render",value:function(){return!this.props.location.hash&&!this.props.location.search||this.props.session.isLoggedIn?s.a.createElement(Ce.a,{to:"/user/dashboard"}):s.a.createElement("div",null)}}]),a}(n.Component),Me=Object(i.b)((function(e){return{session:e.session}}),(function(e){return{initSessionFromCallbackURI:function(t){return e(D(t))}}}))(Le),Fe=a(25),ze=a(295),Ye=a.n(ze);var Ge=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){return s.a.createElement("header",{className:"background rgba-black-strong"},s.a.createElement("div",{className:"container main-container "},s.a.createElement(Ye.a,{loaded:!0},this.props.children)))}}]),a}(s.a.Component),He=Object(i.b)((function(e){return{api:e.api}}))(Ge),Ve=a(38),We=a(32),qe=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row table-row",key:this.props.user.Username},s.a.createElement("div",{className:"col-2"},this.props.user.Username),s.a.createElement("div",{className:"col-3"},this.props.user.name),s.a.createElement("div",{className:"col-3"},this.props.user.email),s.a.createElement("div",{className:"col-3"},this.props.user.phone_number),s.a.createElement("div",{className:"col-1 recipe-details"},s.a.createElement("div",null,s.a.createElement(Ve.a,{alt:"edit user",style:{marginLeft:".1em",cursor:"pointer"},icon:We.a,onClick:function(){return e.props.editUser(e.props.user.Username)}}),s.a.createElement(Ve.a,{alt:"delete user",style:{marginLeft:".5em",cursor:"pointer",color:"red"},icon:We.d,onClick:function(){return e.props.deleteUser(e.props.user.Username)}}))))}}]),a}(s.a.Component),Ke=a(96),Qe=(a(162),function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={users:[],headers:{}},n.deleteUser=n.deleteUser.bind(Object(Fe.a)(n)),n.editUser=n.editUser.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.session.isLoggedIn&&Oe.a.get(v.a.host+v.a.port+"/api/user",this.props.session.headers).then((function(t){t.data.sort((function(e,t){return e.Username>t.Username?1:t.Username>e.Username?-1:0})),e.setState({users:t.data})}))}},{key:"deleteUser",value:function(e){var t=this;Object(Ke.confirmAlert)({title:"Confirm To Delete",message:"Are you sure to do this.",buttons:[{label:"Yes",onClick:function(){Oe.a.delete(v.a.host+v.a.port+"/api/user/".concat(e),t.props.session.headers).then((function(a){var n=t.state.users.findIndex((function(t){return t.Username===e}));t.state.users.splice(n,1),t.props.history.push("/user")}))}},{label:"No",onClick:function(){}}]})}},{key:"editUser",value:function(e){this.props.history.push("/user/edit/"+e)}},{key:"render",value:function(){var e=this,t=this.state.users;return s.a.createElement(He,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"card card-lg mx-auto"},s.a.createElement("div",{className:"card-title"},s.a.createElement("h2",null," ",s.a.createElement("strong",null,"Users")," ",s.a.createElement(Ae.b,{to:"user/create",className:"btn btn-sm btn-outline-secondary float-right"}," Create New User"))),s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"table-container"},s.a.createElement("div",{className:"row table-header"},s.a.createElement("div",{className:"col-2"},"Login"),s.a.createElement("div",{className:"col-3"},"Full Name"),s.a.createElement("div",{className:"col-3"},"Email"),s.a.createElement("div",{className:"col-3"},"Phone"),s.a.createElement("div",{className:"col-1"},"\xa0")),t&&t.map((function(t){return s.a.createElement(qe,{user:t,deleteUser:e.deleteUser,editUser:e.editUser,key:t.username})})),(!t||0===t.length)&&s.a.createElement("div",{className:"col-12"},s.a.createElement("h3",null,"No users found at the moment")))))))}}]),a}(n.Component)),Je=Object(i.b)((function(e){return{session:e.session}}))(Qe),Xe=a(312),Ze=function(e){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"card card-lg mx-auto"},s.a.createElement("div",{href:"#"},s.a.createElement(Ve.a,{className:"float-right card-close",icon:We.c,size:"2x",onClick:e.returnToIndex})),s.a.createElement("div",{className:"card-text"},e.children)))},$e=function(e){return s.a.createElement("form",{className:"row",id:"create-post-form",onSubmit:e.processFormSubmission,noValidate:!0},s.a.createElement("div",{className:"form-group col-md-12"},s.a.createElement("label",{htmlFor:"Username"}," User Name "),s.a.createElement("input",{disabled:!!e.edit&&"disabled",type:"text",id:"Username",defaultValue:e.edit&&e.user.Username||"",onChange:function(t){return e.handleInputChanges(t)},name:"Username",className:"form-control",placeholder:"Enter a Username for the user"})),s.a.createElement("div",{className:"form-group col-md-12"},s.a.createElement("label",{htmlFor:"name"}," Name "),s.a.createElement("input",{type:"text",id:"name",defaultValue:e.edit&&e.user.name||"",onChange:function(t){return e.handleInputChanges(t)},name:"name",className:"form-control",placeholder:"Enter user's first name"})),s.a.createElement("div",{className:"form-group col-md-12"},s.a.createElement("label",{htmlFor:"email"}," Email "),s.a.createElement("input",{type:"email",id:"email",defaultValue:e.edit&&e.user.email||"",onChange:function(t){return e.handleInputChanges(t)},name:"email",className:"form-control",placeholder:"Enter user's email address"})),s.a.createElement("div",{className:"form-group col-md-12"},s.a.createElement("label",{htmlFor:"phone"}," Phone "),s.a.createElement("input",{type:"text",id:"phone_number",defaultValue:e.edit&&e.user.phone_number||"",onKeyDown:function(e){return function(e){e.persist();if(-1!==[8,37,39].indexOf(e.keyCode)||!(e.currentTarget.value.length>11)&&Number.isInteger(parseInt(e.key))){var t=e.currentTarget.value,a=e.currentTarget,n=e.key;setTimeout((function(){""!==a.value&&0!==t.indexOf("+1")&&(a.value="+1"+n)}),1)}else e.preventDefault()}(e)},onChange:function(t){return e.handleInputChanges(t)},name:"phone_number",className:"form-control",placeholder:"+[d]1234567890"})),s.a.createElement("div",{className:"form-group col-md-4 pull-right"},s.a.createElement("button",{className:"btn btn-success",type:"submit"},e.edit?"Edit User":"Add User"),e.loading&&s.a.createElement("span",{className:"fa fa-circle-o-notch fa-spin"})))},et=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).processFormSubmission=function(e){e.preventDefault(),n.setState({loading:!0});var t={Username:n.state.Username,name:n.state.name,email:n.state.email,phone_number:n.state.phone_number};n.setState({submitSuccess:!0,values:[].concat(Object(Xe.a)(n.state.values),[t]),loading:!1}),n.props.session.isLoggedIn&&Oe.a.post(v.a.host+v.a.port+"/api/user",t,n.props.session.headers).then((function(e){return[setTimeout((function(){n.props.history.push("/user")}),1500)]})).catch((function(e){n.setState({submitSuccess:!1,submitFail:!0,errorMessage:e.response.data.message})}))},n.handleInputChanges=function(e){e.preventDefault(),n.setState(Object(ye.a)({},e.currentTarget.name,e.currentTarget.value))},n.returnToIndex=function(e){n.props.history.push("/user")},n.state={Username:"",name:"",email:"",phone_number:"",values:[],loading:!1,submitSuccess:!1,submitFail:!1,errorMessage:null,headers:{}},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn}},{key:"render",value:function(){var e=this.state,t=e.submitSuccess,a=e.submitFail,s=e.loading,r=e.errorMessage;return n.createElement(He,null,n.createElement(Ze,{returnToIndex:this.returnToIndex},n.createElement("div",{className:"col-md-12 "},n.createElement("h2",null,"Create User"),!t&&n.createElement("div",{className:"alert alert-info",role:"alert"},"Fill the form below to create a new post"),t&&n.createElement("div",{className:"alert alert-info",role:"alert"},"The form was successfully submitted!"),a&&n.createElement("div",{className:"alert alert-info",role:"alert"},r),n.createElement($e,{user:this.state.user,handleInputChanges:this.handleInputChanges,loading:s,processFormSubmission:this.processFormSubmission}))))}}]),a}(n.Component),tt=Object(i.b)((function(e){return{session:e.session}}))(et),at=a(140),nt=a.n(at),st=a(296),rt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).processFormSubmission=function(){var e=Object(st.a)(nt.a.mark((function e(t){return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({loading:!0}),Oe.a.put(v.a.host+v.a.port+"/api/user/".concat(n.state.id),n.state.values,n.props.session.headers).then((function(e){n.setState({submitSuccess:!0,loading:!1}),setTimeout((function(){n.props.history.push("/user")}),1500)})).catch((function(e){n.setState({submitSuccess:!1,submitFail:!0,errorMessage:e.response.data.message})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setValues=function(e){n.setState({values:Object(d.a)(Object(d.a)({},n.state.values),e)})},n.handleInputChanges=function(e){e.preventDefault(),n.setValues(Object(ye.a)({},e.currentTarget.id,e.currentTarget.value))},n.returnToIndex=function(e){n.props.history.push("/user")},n.state={id:n.props.match.params.id,user:{},values:[],loading:!1,submitSuccess:!1,submitFail:!1,errorMessage:null,headers:{}},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.session.isLoggedIn&&Oe.a.get(v.a.host+v.a.port+"/api/user/".concat(this.state.id),this.props.session.headers).then((function(t){e.setState({user:t.data})})).catch((function(t){return e.props.history.push("/user")}))}},{key:"render",value:function(){var e=this.state,t=e.submitSuccess,a=e.loading,s=e.submitFail,r=e.errorMessage;return n.createElement(He,null,this.state.user&&n.createElement(Ze,{returnToIndex:this.returnToIndex},n.createElement("div",{className:"col-md-12 "},n.createElement("h2",null,"Edit User"),t&&n.createElement("div",{className:"alert alert-info",role:"alert"},"user's details has been edited successfully"),s&&n.createElement("div",{className:"alert alert-info",role:"alert"},r),n.createElement($e,{user:this.state.user,handleInputChanges:this.handleInputChanges,loading:a,processFormSubmission:this.processFormSubmission,edit:"true"}))))}}]),a}(n.Component),ot=Object(i.b)((function(e){return{session:e.session}}))(rt),it=(a(758),function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).REQUEST_TYPE="USER_BOARD",n.getImages=function(e){return n.endpoint="/api/user_board/images",n.get(e)},n.createImages=function(e){return n.endpoint="/api/user_board/images",n.create(e)},n.deleteImage=function(e){return n.endpoint="/api/user_board/images",n.delete(e)},n.endpoint="/api/user_board",n}return a}(w)),lt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).REQUEST_TYPE="SESSION",n.getImages=function(e){return n.endpoint="/api/session/images",n.get(e)},n.createImages=function(e){return n.endpoint="/api/session/images",n.create(e)},n.deleteImage=function(e){return n.endpoint="/api/session/images",n.delete(e)},n.endpoint="/api/session",n}return a}(w),ct=function(e){return{type:"SET_USER_SESSIONS",payload:e}},ut=function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return ct(e)}});a(new lt(e).get(s))}},dt=function(e){return{type:"SET_USER_BOARDS",payload:e}},mt=function(e){return{type:"USER_BOARDS_CLEARED",payload:e}},pt=function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"SET_USER_BOARD",payload:e}}(e)}});a(new it(e).getOne(s))}},ht=function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return dt(e)}});a(new it(e).get(s))}},ft=a(78),gt=a.n(ft),vt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).state={board_id:null,manufacturer_id:null,uploaderInstance:1},e.onDrop=e.onDrop.bind(Object(Fe.a)(e)),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn&&(this.props.loadUser(this.props.session,{id:this.props.session.user.id}),this.props.loadUserAverages(this.props.session,{id:this.props.session.user.id}))}},{key:"onDrop",value:function(e,t){var a=I.createFormRequest({user_id:this.props.session.user.id});e.forEach((function(e,t){a.append("photo",e)})),this.props.updateImage(this.props.session,{data:a}),this.setState({uploaderInstance:this.state.uploaderInstance+1})}},{key:"render",value:function(){var e=this.props.user,t=this.props.user.profile_img?ie+this.props.user.profile_img:"https://www.bootdey.com/img/Content/avatar/avatar7.png";return s.a.createElement("div",{className:"team-single"},s.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-4 col-md-5 xs-margin-30px-bottom"},s.a.createElement("div",{className:"team-single-img"},s.a.createElement("img",{src:t,alt:""})),s.a.createElement("div",{className:"bg-light-gray padding-30px-all md-padding-25px-all sm-padding-20px-all text-center"},s.a.createElement("div",{className:"sm-width-95 sm-margin-auto"},s.a.createElement(gt.a,{key:this.state.uploaderInstance,withIcon:!1,buttonText:"Update Profile Photo",onChange:this.onDrop,imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880,label:"",withPreview:!1,singleImage:!0})))),s.a.createElement("div",{className:"col-lg-8 col-md-7"},s.a.createElement("div",{className:"team-single-text padding-50px-left sm-no-padding-left"},s.a.createElement("h4",{className:"font-size38 sm-font-size32 xs-font-size30"},e.first_name," ",e.last_name),s.a.createElement("p",{className:"no-margin-bottom"}),s.a.createElement("div",{className:"contact-info-section margin-40px-tb"},s.a.createElement("ul",{className:"list-style9 no-margin"},s.a.createElement("li",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-5 col-5"},s.a.createElement("i",{className:"far fa-gem text-yellow"}),s.a.createElement("strong",{className:"margin-10px-left text-yellow"},"username:")),s.a.createElement("div",{className:"col-md-7 col-7"},s.a.createElement("p",null,e.username)))),s.a.createElement("li",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-5 col-5"},s.a.createElement("i",{className:"far fa-gem text-yellow"}),s.a.createElement("strong",{className:"margin-10px-left text-yellow"},"Member Since:")),s.a.createElement("div",{className:"col-md-7 col-7"},s.a.createElement("p",null,u()(e.createdAt).format("MM-DD-YYYY"))))),s.a.createElement("li",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-5 col-5"},s.a.createElement("i",{className:"fas fa-envelope text-pink"}),s.a.createElement("strong",{className:"margin-10px-left xs-margin-four-left text-pink"},"Email:")),s.a.createElement("div",{className:"col-md-7 col-7"},s.a.createElement("p",null,e.email)))))),s.a.createElement("div",{className:"sm-no-margin"},s.a.createElement("div",{className:"progress-text"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-7"},"Total Sessions"),s.a.createElement("div",{className:"col-5 text-right"},Math.round(this.props.aggregations.total_sessions)))),s.a.createElement("div",{className:"progress-text"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-7"},"Average Session Rating"),s.a.createElement("div",{className:"col-5 text-right"},this.props.aggregations.session_rating," out of 10"))),s.a.createElement("div",{className:"custom-progress progress"},s.a.createElement("div",{role:"progressbar","aria-valuenow":"70","aria-valuemin":"0","aria-valuemax":"100",style:{width:"".concat(10*this.props.aggregations.session_rating,"%")},className:"animated custom-bar progress-bar slideInLeft bg-sky"})))))))}}]),a}(s.a.Component),bt=Object(i.b)((function(e){return{user:e.user.data,session:e.session,aggregations:e.user.averages}}),(function(e){return{updateImage:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_IMAGE_UPDATED",payload:e}}(e)}});a(new I(e).updateProfileImage(s))}}(t,a))},loadUser:function(t,a){return e(C(t,a))},loadUserAverages:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_AVERAGES_LOADED",payload:e}}(e)}});a(new I(e).getAverages(s))}}(t,a))}}}))(vt),Et=(a(762),a(297)),St=a.n(Et);window.geolocator.config({language:"en",google:{version:"3",key:St.a.api_key}});var _t=window.geolocator,yt={enableHighAccuracy:!1,timeout:5e3,maximumWait:1e4,maximumAge:0,desiredAccuracy:30,fallbackToIP:!0,addressLookup:!0},Nt=a(298),Ot=a.n(Nt),wt=a(195);a(74).config();var It=Ot()("6OW1B8K1KD","b541757295fac3492ed3a1041a5ed003",{responsesCache:Object(wt.a)(),requestsCache:Object(wt.a)({serializable:!1})}).initIndex("surfline_spots"),jt=function(e,t){return It.search("",{aroundLatLng:"".concat(e,", ").concat(t),aroundRadius:1e4})},Ct=(a(1015),a(763),function(e,t,a){var n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))}),At=function(e){var t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t);return(new Date).getTime()>a.expiry?(localStorage.removeItem(e),null):a.value},kt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).state={spots:[],selected:""},e.setState=e.setState.bind(Object(Fe.a)(e)),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this.setState;if(this.props.session.isLoggedIn){var t=At("nrspt");t?this.setState({spots:JSON.parse(t)}):_t.locate(yt,(function(t,a){if(t)return console.log("location err",t);jt(a.coords.latitude,a.coords.longitude).then((function(t){e({spots:t.hits}),Ct("nrspt",JSON.stringify(t.hits),36e3)}))}))}}},{key:"render",value:function(){var e=this.state.spots;return s.a.createElement("div",{className:"container surfline nearest_spots"},s.a.createElement("h6",null,"Nearest Spots"),e.map((function(e){return s.a.createElement("div",{className:"row spot",key:e.url},s.a.createElement("div",{className:"col"},s.a.createElement("a",{href:e.url,target:"_blank"},e.name)))})))}}]),a}(s.a.Component),Dt=Object(i.b)((function(e){return{session:e.session}}))(kt),Rt=function(e,t){return new Promise((function(a,n){var s=new Date;jt(e,t).then((function(e){var t=e.hits[0]._geoloc.lat,n=e.hits[0]._geoloc.lon;fetch("".concat(v.a.host+v.a.port,"/api/sc?lat=").concat(e.hits[0]._geoloc.lat,"&lon=").concat(e.hits[0]._geoloc.lon,"&name=").concat(e.hits[0].id)).then((function(e){return e.json()})).then((function(e){var r=e.hours[s.getHours()],o={water_temperature:(9*r.waterTemperature.sg/5+32).toFixed(),swell_height:(3.28084*r.swellHeight.noaa).toFixed(1),swell_period:r.swellPeriod.noaa.toFixed(),wave_height:(3.28084*r.waveHeight.noaa).toFixed(1),wave_period:r.wavePeriod.noaa.toFixed(),pressure:100*(2953e-7*r.pressure.sg).toFixed(2),wind_speed:(1.94384*r.windSpeed.sg).toFixed(1),lat:t,lon:n};a(o)}))}))}))},xt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).state={data:{},location:""},e.setState=e.setState.bind(Object(Fe.a)(e)),e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){if(this.props.session.isLoggedIn)if(this.props.stormglass.data.wave_period)this.setState({data:this.props.stormglass.data});else{var e=this.setState,t=this.props.stormglassLoaded;_t.locate(yt,(function(a,n){if(a)return console.log("location err",a);Rt(n.coords.latitude,n.coords.longitude).then((function(a){t(a),e({data:a})}))}))}}},{key:"render",value:function(){return s.a.createElement("div",{className:"container surfline nearest_spots"},s.a.createElement("h6",null,"Local Report"),s.a.createElement("div",{className:"row spot"},s.a.createElement("div",{className:"col"}," ",s.a.createElement("i",null,"Observations Near ",this.state.location))),s.a.createElement("div",{className:"row spot"},s.a.createElement("div",{className:"col"},s.a.createElement("div",null,"Water Temp: ",this.state.data.water_temperature,"F"),s.a.createElement("div",null,"Swell Height: ",this.state.data.swell_height,"ft"),s.a.createElement("div",null,"Swell Period: ",this.state.data.swell_period,"s"),s.a.createElement("div",null,"Wave Height: ",this.state.data.wave_height,"ft"),s.a.createElement("div",null,"Wave Period: ",this.state.data.wave_period,"s"),s.a.createElement("div",null,"Pressure: ",this.state.data.pressure,"in"),s.a.createElement("div",null,"Wind Speed: ",this.state.data.wind_speed,"k"))))}}]),a}(s.a.Component),Tt=Object(i.b)((function(e){return{session:e.session,stormglass:e.stormglass}}),(function(e){return{stormglassLoaded:function(t){return e(function(e){return{type:"STORMGLASS_LOADED",payload:e}}(t))}}}))(xt),Ut=function(e){var t=[],a=e.size?e.size:"xs",n=e.static&&!0===e.static?"star-static":"star",r=e.static&&!0===e.static?"star-disabled-static":"star-disabled",o=function(t){e.static&&!0===e.static||e.onClick&&e.onClick({rating:t})};if(e.stars&&0!==e.stars){for(var i=function(e){t.push(s.a.createElement(Ve.a,{className:n,icon:We.b,size:a,onClick:function(){o(e+1)},key:e+1}))},l=0;l<e.stars;l++)i(l);for(var c=function(e){t.push(s.a.createElement(Ve.a,{className:r,icon:We.b,onClick:function(){o(e+1)},size:a,key:e+1}))},u=e.stars;u<10;u++)c(u)}else for(var d=function(e){t.push(s.a.createElement(Ve.a,{className:r,icon:We.b,onClick:function(){o(e+1)},size:a,key:e+1}))},m=0;m<10;m++)d(m);return t},Bt=Object(Ce.g)((function(e){return s.a.createElement("div",{className:"container-fluid session-card"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 session-card-title",onClick:function(){return e.history.push("/session/"+e.session.id)}},s.a.createElement("button",{className:"btn btn-link card-title",onClick:function(){return e.history.push("/session/"+e.session.id)}},e.session.title)),s.a.createElement("div",{className:"col-4"},s.a.createElement("div",{onClick:function(){return e.history.push("/session/"+e.session.id)}},s.a.createElement("img",{className:"img-responsive img-thumbnail img-card",alt:e.session.title,src:e.session.SessionImages&&e.session.SessionImages.length?ie+e.session.SessionImages[0].name:"/img/session_default_lg.png"})),e.isOwner&&s.a.createElement("div",{style:{textAlign:"center",marginTop:"0.3em"}},e.editSession&&s.a.createElement(Ve.a,{size:"lg",alt:"edit user",style:{marginLeft:".1em",cursor:"pointer"},icon:We.a,onClick:function(){return e.editSession(e.session.id)}}),e.deleteSession&&s.a.createElement(Ve.a,{size:"lg",alt:"delete user",style:{marginLeft:".5em",cursor:"pointer"},icon:We.d,onClick:function(t){t.preventDefault(),e.deleteSession(e.session.id)}}))),s.a.createElement("div",{className:"col-8",onClick:function(){return e.history.push("/session/"+e.session.id)}},s.a.createElement("div",{className:"card-date"},u()(e.session.createdAt).calendar()),s.a.createElement("div",{className:"card-rating"},s.a.createElement(Ut,{stars:e.session.rating})),s.a.createElement("div",{className:"capitalize"},e.session.UserBoard&&e.session.UserBoard.name?e.session.UserBoard.name:"No Board Selected"),s.a.createElement("div",{className:"capitalize"},e.session.Location&&e.session.Location.name?e.session.Location.name+" "+e.session.Location.vicinity:"No Location Specified"))))})),Pt=function(e){return e.sessions.length?s.a.createElement("div",{className:"alert alert-primary card-newest-resultset"},s.a.createElement("h5",null,"Latest Sessions"),e.sessions&&e.sessions.reduce((function(t,a,n){return n<e.limit&&t.push(s.a.createElement(Bt,{session:a,key:a.id})),t}),[])):s.a.createElement("div",{className:"alert alert-primary text-center card-newest-resultset card-newest-empty-resultset"},s.a.createElement("h5",null,"Latest Sessions"),s.a.createElement("div",null,"You haven't created any Sessions Yet."),s.a.createElement("div",null,s.a.createElement(Ae.b,{className:"btn btn-sm btn-primary",to:"/session"},"Get Started!")))},Lt=Object(Ce.g)((function(e){return s.a.createElement("div",{className:"container-fluid session-card"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 board-card-title"},s.a.createElement("button",{className:"btn btn-link card-title capitalize",onClick:function(){return e.history.push("/board/"+e.board.id)}},e.board.name)),s.a.createElement("div",{className:"col-4",onClick:function(){return e.history.push("/board/"+e.board.id)}},s.a.createElement("img",{className:"img-responsive img-thumbnail img-card",alt:"",src:e.board.UserBoardImages&&e.board.UserBoardImages.length?ie+e.board.UserBoardImages[0].name:"/img/board_default_lg.png"})),s.a.createElement("div",{className:"col-8"},e.isOwner&&s.a.createElement("div",null,e.editBoard&&s.a.createElement(Ve.a,{size:"lg",alt:"edit user",style:{marginLeft:".1em",cursor:"pointer"},icon:We.a,onClick:function(){return e.editBoard(e.board.id)}}),e.deleteBoard&&s.a.createElement(Ve.a,{size:"lg",alt:"delete user",style:{marginLeft:".5em",cursor:"pointer",color:"red"},icon:We.d,onClick:function(){return e.deleteBoard(e.board.id)}})),s.a.createElement("div",{onClick:function(){return e.history.push("/board/"+e.board.id)}},s.a.createElement("div",{className:"card-rating"},s.a.createElement(Ut,{stars:e.board.rating})),s.a.createElement("div",{className:"board-card-model"},e.board.size," ",e.board.Board&&e.board.Board.model)))))})),Mt=function(e){return e.boards.length?s.a.createElement("div",{className:"alert alert-primary text-center card-newest-resultset"},s.a.createElement("h5",null,"Newest Boards"),e.boards.reduce((function(t,a,n){return n<e.limit&&t.push(s.a.createElement(Lt,{board:a,key:a.id})),t}),[])):s.a.createElement("div",{className:"alert alert-primary text-center card-newest-resultset card-newest-empty-resultset"},s.a.createElement("h5",null,"Newest Boards"),s.a.createElement("div",null,"You haven't added any Boards Yet."),s.a.createElement("div",null,s.a.createElement(Ae.b,{className:"btn btn-sm btn-primary",to:"/board"},"Get Started!")))},Ft={user:[],boards:["Board","UserBoardImage"],sessions:["UserBoard","SessionImage","Location"]},zt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn&&(this.props.loadBoards(new it(this.props.session),this.props.session),this.props.loadSessions(new lt(this.props.session),this.props.session))}},{key:"render",value:function(){var e=this.props,t=e.user_sessions,a=e.boards;return n.createElement(He,null,n.createElement("div",{className:"container card card-lg mx-auto dashboard"},n.createElement("div",{className:"row dashboard-boxes"},n.createElement("div",{className:"col-10"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement(bt,null)),n.createElement("div",{className:"col"},n.createElement(Pt,{sessions:t,limit:3})),n.createElement("div",{className:"col"},n.createElement(Mt,{boards:a,limit:3})))),n.createElement("div",{className:"col-2"},n.createElement("div",{className:"index-sidecard"},n.createElement("img",{className:"align-left",src:"/img/LogoMakr_4GvwRg.png",alt:"glazewave"})),n.createElement("div",{className:"index-sidecard"},n.createElement(Tt,null)),n.createElement("div",{className:"index-sidecard"},n.createElement(Dt,null))))))}}]),a}(n.Component),Yt=Object(i.b)((function(e){return{session:e.session,boards:e.user_boards.data,user_sessions:e.user_sessions.data,locations:e.user.UserLocations}}),(function(e){return{loadBoards:function(t,a){return e(t.get({wheres:{user_id:a.user.id},orderBy:"created_at_DESC",withs:Ft.boards,onSuccess:function(e){return dt(e)}}))},loadSessions:function(t,a){return e(t.get({wheres:{user_id:a.user.id},orderBy:"created_at_DESC",withs:Ft.sessions,onSuccess:function(e){return ct(e)}}))}}}))(zt),Gt=(a(236),a(80)),Ht=a.n(Gt),Vt=a(37),Wt=a(42),qt=a(299),Kt=a.n(qt),Qt=a(311),Jt=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:"",value:"",location_id:"",is_editing:!1},e.handleInputChange=function(t){e.setState({search:t.target.value,value:t.target.value,is_editing:!0})},e.handleSelectSuggest=function(t,a){console.log(t,a),e.setState({search:"",value:t.formatted_address,location_id:t.place_id}),e.props.onChange("location_id",t.place_id),e.setState({is_editing:!1}),Rt(t.geometry.location.lat(),t.geometry.location.lng()).then((function(t){return e.props.onChange("conditions",t)}))},e.handleNoResult=function(){console.log("No results for ",e.state.search)},e.handleStatusUpdate=function(e){console.log("key status is",e)},e.onBlur=function(t){e.state.is_editing&&(console.log("blur",t),e.setState({value:"",is_editing:!1}))},e.locRender=function(e){return console.log(e.types),-1!==e.types.indexOf("route")?e.description:null},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.value,r=this.props,o=r.fieldProps,i=r.fieldState,l=r.id,c=r.name,u=r.label,m=r.hint,p=i.touched,h=i.pristine,f=i.required,g=i.validating,v=i.validatedSync,b=i.validatedAsync,E=i.valid,S=i.validSync,_=i.validAsync,y=i.invalid,N=i.errors,O=["form-control",p&&"is-touched",h&&"is-pristine",g&&"is-validating",v&&"validated-sync",b&&"validated-async",E&&"is-valid",S&&"valid-sync",_&&"valid-async",y&&"is-invalid","google-locations-input","sc-EHOje fVJbnH"].filter(Boolean).join(" "),w=Object(d.a)(Object(d.a)({},o),{},{className:O,autoComplete:"off"}),I=this.props.display?"sc-bxivhb d-none":"sc-bxivhb";return s.a.createElement("div",{className:I},u&&s.a.createElement("label",{className:"sc-bwzfXH dybocD",htmlFor:l||c},u,f&&" *"),s.a.createElement("div",{className:"sc-ifAKCX"},s.a.createElement(Kt.a,{params:{key:"AIzaSyBaaD_720jqJaoIBsQib_N79Q5_iciLRBc",libraries:"places,geocode"},render:function(t){return t&&s.a.createElement(Qt.a,{googleMaps:t,autocompletionRequest:{input:a},onNoResult:e.handleNoResult,onSelectSuggest:e.handleSelectSuggest,onStatusUpdate:e.handleStatusUpdate,textNoResults:"My custom no results text",customRender:function(t){return s.a.createElement("div",{className:"customWrapper"},e.locRender(t))}},s.a.createElement("input",Object.assign({},w,{type:"text",autoComplete:"off",value:n,onBlur:e.onBlur,onChange:e.handleInputChange})))}})),m&&s.a.createElement("small",{className:"form-text text-muted"},m),N&&N.map((function(e,t){return s.a.createElement("div",{key:t,className:"invalid-feedback"},e)})))}}]),a}(n.Component),Xt=Object(Vt.createField)(Vt.fieldPresets.input)(Jt),Zt={name:{title:{matches:function(e){e.value,e.get;return!0}}}},$t={generic:{missing:"Please provide the required field",invalid:"The value you have provided is invalid"},name:{title:{missing:"Please Provide a Name for the session",rule:{matches:"The passwords do not match"}}}},ea=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),L(e.session.user.id),(n=t.call(this,e)).onChange=function(e,t){var a=[];a[e]=t,n.setState(Object(d.a)({},a))},n.defaultName=u()().format("MMMM D YYYY, h:mm a"),n.state={show:!1,pictures:e.pictures,location_id:"",conditions:{}},n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn&&(this.props.boards.loaded||this.props.loadBoards(this.props.session,{wheres:{user_id:this.props.session.user.id}}))}},{key:"componentWillUnmount",value:function(){this.props.clearBoards()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement(Vt.Form,{action:function(t){var a=t.serialized,n=t.fields,s=t.form;return e.props.processFormSubmission({session:e.props.session,conditions:e.state.conditions,serialized:a,fields:n,form:s})},rules:Zt,messages:$t},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 "},s.a.createElement(Wt.Input,{name:"title",label:"Session Name",className:"form-control",initialValue:this.defaultName,required:!0}),s.a.createElement(Xt,{id:"location_id",name:"location_id",label:"Where You paddling Out?",className:"form-control",onChange:this.onChange,value:this.state.location_id})),s.a.createElement("div",{className:"col-12 clear-fix"},s.a.createElement(Wt.Input,{type:"hidden",name:"user_id",value:this.props.session.user.id}),s.a.createElement("span",{style:{float:"right"}},s.a.createElement(Wt.Button,{type:"submit"},this.props.edit?"Edit Session":"Add Session"))))))}}]),a}(s.a.Component),ta=Object(i.b)((function(e){return{session:e.session,boards:e.user_boards,user_sessions:e.user_sessions}}),(function(e){return{loadBoards:function(t,a){return e(ht(t,a))},clearBoards:function(){return e((function(e,t){e(mt(null))}))}}}))(ea),aa=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).processFormSubmission=function(e){var t=e.conditions,a=e.serialized;e.fields,e.form;console.log("form cond",t);var s=n.props,r=s.session,o=s.createSession,i=n.state.images;return new Promise((function(e,n){if(r.isLoggedIn){var s=lt.createFormRequest(a);i.forEach((function(e,t){s.append("photo",e)})),s.append("conditions",JSON.stringify(t)),o(r,{data:s}),e(s)}else n("user not logged in ")}))},n.returnToIndex=function(e){n.props.history.push("/user/dashboard")},n.state={values:[],loading:!1,submitSuccess:!1,submitFail:!1,errorMessage:null,images:[],show:!1},n.onDrop=n.onDrop.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"onDrop",value:function(e,t){this.setState({images:this.state.images.concat(e)})}},{key:"componentDidMount",value:function(){this.props.session.isLoggedIn||this.props.onSubmissionComplete()}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.props.noUpdate||e.user_sessions.data.length!==this.props.user_sessions.data.length&&this.props.user_sessions.created&&(this.setState({submitSuccess:!0}),setTimeout((function(){if(n.props.onSubmissionComplete){var e=n.props.user_sessions.created.id;n.props.clearCreatedSession(),n.props.onSubmissionComplete(e)}else n.props.history.push("/board")}),1500))}},{key:"render",value:function(){var e=this.state,t=e.submitSuccess,a=e.submitFail,n=e.loading,r=e.errorMessage;e.images;return s.a.createElement(Ze,{returnToIndex:this.props.close},s.a.createElement("div",{className:"col-md-12 row "},s.a.createElement("div",{className:"col-md-12 "},s.a.createElement("h2",null,"Create A Session"),!t&&s.a.createElement("div",{className:"alert alert-info",role:"alert"},"Fill the form below to create a new session"),t&&s.a.createElement("div",{className:"alert alert-info",role:"alert"},"The form was successfully submitted!"),a&&s.a.createElement("div",{className:"alert alert-info",role:"alert"},r)),s.a.createElement("div",{className:"col-md-12"},s.a.createElement(ta,{key:"session_form",session:this.state.session,processFormSubmission:this.processFormSubmission,loading:n,boards:this.props.boards,onDrop:this.onDrop}))))}}]),a}(s.a.Component),na=Object(i.b)((function(e){return{session:e.session,boards:e.user_boards,user_sessions:e.user_sessions}}),(function(e){return{createSession:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_SESSION_CREATED",payload:e}}(e)}});a(new lt(e).create(s))}}(t,a))},clearCreatedSession:function(){return e({type:"USER_SESSION_CREATED_CLEARED"})}}}))(aa),sa=(a(780),function(e){e.handleClose;var t=e.show,a=e.children,s=t?"modal display-block":"modal display-none";return n.createElement("div",{className:s},n.createElement("section",{className:"modal-main"},a))}),ra=a(59),oa={user_session:["UserBoard","Location","SessionImage","SessionData"]},ia=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).showModal=function(){console.log("modal launched"),n.setState({show:!0})},n.hideModal=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({show:!1})},n.onSortUpdated=function(e,t){for(var a="",s=0,r=Object.entries(t.sort[0]);s<r.length;s++){var o=Object(_.a)(r[s],2),i=o[0],l=o[1];a="".concat(i,"_").concat(l.order)}n.setState({selectedSortOrder:a})},n.elasticResultHandler=function(e){var t=[];e.data.forEach((function(e){t.push(e.id)})),t.length?n.props.loadSessions(n.props.session,{orderBy:n.state.selectedSortOrder,wheres:{in:t.join(",")},withs:oa.user_session,limit:8}):n.props.clearSessions()},n.setScope=function(e){var t=[{match:{user_id:n.props.session.user.id}}];if(e.nextValue&&1===parseInt(e.nextValue)){t.push({match:{is_public:1}})}n.setState({esFilters:t,showAll:parseInt(e.nextValue)})},n.state={show:!1,selectedSortOrder:"id_DESC",showAll:0,esFilters:[]},n.deleteSession=n.deleteSession.bind(Object(Fe.a)(n)),n.editSession=n.editSession.bind(Object(Fe.a)(n)),n.viewSession=n.viewSession.bind(Object(Fe.a)(n)),n.showModal=n.showModal.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.setScope({nextValue:0})}},{key:"componentWillUnmount",value:function(){this.props.clearSessions()}},{key:"deleteSession",value:function(e){var t=this;Object(Ke.confirmAlert)({title:"Confirm To Delete",message:"Are you sure you want to delete this session?",buttons:[{label:"Yes",onClick:function(){t.props.deleteSession(t.props.session,e)}},{label:"No",onClick:function(){}}]})}},{key:"editSession",value:function(e){this.props.history.push("/session/edit/"+e)}},{key:"viewSession",value:function(e){this.props.history.push("/session/"+e)}},{key:"render",value:function(){var e=this,t=this.showModal;return s.a.createElement(He,null,s.a.createElement(ra.b,{app:Ht.a.sessions_index,url:Ht.a.host,credentials:Ht.a.credentials},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"container card card-lg mx-auto"},s.a.createElement("div",{className:"card-title"},s.a.createElement("h2",null,"Sessions",s.a.createElement(Ae.b,{to:"#",onClick:this.showModal,className:"btn btn-sm btn-outline-secondary float-right"},"Create New Session"))),s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row col-12"},s.a.createElement("div",{className:"col-2"}),s.a.createElement("div",{className:"col-10"},s.a.createElement("span",{className:"float-right"}))),s.a.createElement("div",{className:"row col-12"},s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"col-3"}),s.a.createElement("div",{className:"col-9"},s.a.createElement(ra.d,null))),s.a.createElement("div",{className:"col-3"},s.a.createElement("div",{className:"detail-line is_public_radio"},s.a.createElement(Vt.Form,null,s.a.createElement(Wt.Radio,{name:"is_public",label:"Mine",value:"0",onChange:this.setScope,checked:0===parseInt(this.state.showAll)}),s.a.createElement(Wt.Radio,{className:"is_public_radio",name:"is_public",label:"Mine + Public",value:"1",onChange:this.setScope,checked:1===parseInt(this.state.showAll)}))),s.a.createElement("div",{className:"filter-widgets",id:"sessions"},s.a.createElement(ra.a,{componentId:"board",dataField:"board",innerClass:{label:"elastic-facet-label",input:"form-control"},title:"Boards",react:{and:["locations"]},defaultQuery:function(){return{query:{bool:{should:e.state.esFilters}}}}}),s.a.createElement(ra.a,{componentId:"locations",dataField:"location",title:"Locations",innerClass:{label:"elastic-facet-label"},react:{and:["board"]},defaultQuery:function(){return{query:{bool:{should:e.state.esFilters}}}}}))),s.a.createElement("div",{className:"col-7"},s.a.createElement("div",{className:"row"},s.a.createElement(ra.c,{onData:this.elasticResultHandler,onQueryChange:this.onSortUpdated,defaultQuery:function(){return{query:{bool:{should:e.state.esFilters}}}},renderResultStats:function(e){return s.a.createElement("div",{className:"elastic-meta"},e.numberOfResults+" Results Sorted By")},renderNoResults:function(){return s.a.createElement("div",{className:"alert alert-primary text-center index-empty-resultset"},s.a.createElement("div",null,"You Haven't Created Any Sessions Yet"),s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:t},"Get Started!")))},className:"col-12",componentId:"results",react:{and:["board","locations"]},pagination:!0,size:8,infiniteScroll:!0,innerClass:{pagination:"elastic-paginate",sortOptions:"form-control elastic-sort"},sortOptions:[{dataField:"id",sortBy:"desc",label:"Newest To Oldest"},{dataField:"id",sortBy:"asc",label:"Oldest To Newest"},{dataField:"title",sortBy:"asc",label:"Title A->Z"},{dataField:"title",sortBy:"desc",label:"Title Z->A"},{dataField:"rating",sortBy:"asc",label:"Rating 1-10"},{dataField:"rating",sortBy:"desc",label:"Rating 10-1"}],paginationAt:"both",render:function(t){t.data;return e.props.sessions&&e.props.sessions.map((function(t){return s.a.createElement("div",{key:t.id,className:"col-12"},s.a.createElement(Bt,{isOwner:t.user_id===e.props.session.user.id,session:t,key:t.id,deleteSession:e.deleteSession,viewSession:e.viewSession,editSession:e.editSession}))}))}}))),s.a.createElement("div",{className:"col-2"},s.a.createElement("div",{className:"index-sidecard"},s.a.createElement("img",{className:"align-left",src:"/img/LogoMakr_4GvwRg.png",alt:"glazewave"})),s.a.createElement("div",{className:"index-sidecard"},s.a.createElement(Tt,null)),s.a.createElement("div",{className:"index-sidecard"},s.a.createElement(Dt,null)))),s.a.createElement("div",{className:"row col-12"},s.a.createElement("div",{className:"col-6"}),s.a.createElement("div",{className:"col-6"},s.a.createElement("span",{className:"float-right"})))))))),s.a.createElement(sa,{show:this.state.show},s.a.createElement(na,{onSuccess:function(t){return e.hideModal(t)},onSubmissionComplete:this.viewSession,close:this.hideModal})))}}]),a}(n.Component),la=Object(i.b)((function(e){return{session:e.session,sessions:e.user_sessions.data}}),(function(e){return{loadSessions:function(t,a){return e(ut(t,a))},deleteSession:function(t,a){return e(function(e,t){return function(a,n){var s={id:t,onSuccess:function(e){return function(e){return{type:"USER_SESSION_DELETED",payload:e}}(t)}};a(new lt(e).delete(s))}}(t,a))},clearSessions:function(){return e({type:"USER_SESSIONS_CLEARED"})}}}))(ia),ca=(a(836),a(837),a(143)),ua=a.n(ca),da=a(101),ma=a(308),pa=a.n(ma),ha=a(144),fa=a.n(ha),ga=a(196),va=a.n(ga),ba=(a(910),a(102)),Ea=a.n(ba),Sa=a(306),_a=a.n(Sa),ya=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).onChange=function(e,t){var a=t.newValue;console.log("key",a),n.state.value!==a&&n.setState({value:a})},n.onBlur=function(e){n.state.value&&console.log("blur",e.target.value);var t=n.props.entity.find((function(t){return t[n.props.keyName]===e.target.value}));n.props.setValue(n.props.name,t?t.id:e.target.value)},n.getSuggestionValue=function(e){return e[n.props.keyName]},n.renderSuggestion=function(e){return s.a.createElement("div",null,e[n.props.keyName])},n.onSuggestionsFetchRequested=function(e){var t=e.value,a=e.reason;n.setState({suggestions:n.props.getSuggestions(t,a)})},n.onSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.onSuggestionSelected=function(e,t){var a=t.suggestion;n.props.setValue(n.props.name,a.id)},n.shouldRenderSuggestions=function(e){return!0},n.state={value:e.value||"",suggestions:e.entity},n}return Object(y.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.fieldProps,n=t.fieldState,r=t.id,o=t.name,i=t.label,l=t.hint,c=this.state,u=c.value,m=c.suggestions,p=n.touched,h=n.pristine,f=n.required,g=n.validating,v=n.validatedSync,b=n.validatedAsync,E=n.valid,S=n.validSync,_=n.validAsync,y=n.invalid,N=n.errors,O=["form-control",p&&"is-touched",h&&"is-pristine",g&&"is-validating",v&&"validated-sync",b&&"validated-async",E&&"is-valid",S&&"valid-sync",_&&"valid-async",y&&"is-invalid","sc-EHOje fVJbnH"].filter(Boolean).join(" "),w=Object(d.a)(Object(d.a)({},a),{},{value:u,onBlur:this.onBlur,onChange:this.onChange,onFocus:function(){return e.onSuggestionsFetchRequested({value:o,reason:"type_ahead_focused"})},id:o,name:o,className:O,autoComplete:"off"}),I=this.props.display?"sc-bxivhb":"sc-bxivhb d-none";return s.a.createElement("div",{className:I},i&&s.a.createElement("label",{className:"sc-bwzfXH dybocD",htmlFor:r||o},i,f&&" *"),s.a.createElement("div",{className:"sc-ifAKCX fatWUN",style:{maxHeight:200,overflow:"auto"}},s.a.createElement(_a.a,{suggestions:m,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:w,onSuggestionSelected:this.onSuggestionSelected,onSuggestionsClearRequested:this.onSuggestionsClearRequested,shouldRenderSuggestions:this.shouldRenderSuggestions})),l&&s.a.createElement("small",{className:"form-text text-muted"},l),N&&N.map((function(e,t){return s.a.createElement("div",{key:t,className:"invalid-feedback"},e)})))}}]),a}(s.a.Component),Na=Object(Vt.createField)(Vt.fieldPresets.input)(ya),Oa={name:{title:{matches:function(e){e.value,e.get;return!0}}}},wa={generic:{missing:"Please provide the required field",invalid:"The value you have provided is invalid"},name:{title:{missing:"Please Provide a Name for the session",rule:{matches:"The passwords do not match"}},board_id:{missing:"Please Choose or Add A Board Model",rule:{matches:"The passwords do not match"}}}},Ia=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).REQUEST_TYPE="MANUFACTURER",n.endpoint="/api/manufacturer",n}return a}(w),ja=function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"SHAPERS_LOADED",payload:e}}(e)}});a(new Ia(e).get(s))}},Ca=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).REQUEST_TYPE="BOARD",n.endpoint="/api/board",n}return a}(w),Aa=function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"BOARDS_LOADED",payload:e}}(e)}});a(new Ca(e).get(s))}},ka={shapers:["Board"],boards:["Manufacturer"]},Da=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).onChange=function(t,a){var n=[];n[t]=a,e.setState(Object(d.a)({},n))},e.getBoardSuggestions=function(t){if(!t)return e.props.boards.filter((function(t){return t.manufacturer_id===e.state.manufacturer_id}));var a=t.trim().toLowerCase(),n=a.length;return 0===n?[]:e.props.boards.filter((function(t){return t.model.toLowerCase().slice(0,n)===a&&t.manufacturer_id===e.state.manufacturer_id}))},e.getShaperSuggestions=function(t){if(!t)return e.props.shapers;var a=t.trim().toLowerCase(),n=a.length;return 0===n?[]:e.props.shapers.filter((function(e){return e.name.toLowerCase().slice(0,n)===a}))},e.state={board_id:null,manufacturer_id:null},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn?(this.props.boards.length||this.props.loadBoards(this.props.session,{limit:1e3,withs:ka.boards}),this.props.shapers.length||this.props.loadShapers(this.props.session,{limit:1e3,withs:ka.shapers})):this.props.history.push("/")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement(Vt.Form,{action:function(t){var a=t.serialized,n=t.fields,s=t.form;return e.props.processFormSubmission({session:e.props.session,serialized:a,fields:n,form:s})},rules:Oa,messages:wa},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 "},s.a.createElement(Wt.Input,{name:"name",label:"Nickname",className:"form-control",required:!0}),s.a.createElement(Na,{entity:this.props.shapers,name:"manufacturer_id",keyName:"name",label:"choose a shaper",className:"form-control",placeholder:"Unknown",value:this.state.manufacturer_id,setValue:this.onChange,getSuggestions:this.getShaperSuggestions,display:!0,required:!0}),s.a.createElement(Na,{entity:this.props.boards,name:"board_id",keyName:"model",label:"choose a model",className:"form-control",placeholder:"choose a board",value:this.state.board_id,setValue:this.onChange,getSuggestions:this.getBoardSuggestions,display:null!==this.state.manufacturer_id,required:!0}),s.a.createElement(gt.a,{withIcon:!1,buttonText:"Choose images",onChange:this.props.onDrop,imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!0})),s.a.createElement("div",{className:"col-12"},s.a.createElement(Wt.Input,{type:"hidden",name:"user_id",value:this.props.session.user.id}),s.a.createElement(Wt.Button,{type:"submit"},this.props.edit?"Edit Board":"Add Board")))))}}]),a}(s.a.Component),Ra=Object(i.b)((function(e){return{session:e.session,boards:e.boards.data,shapers:e.shapers.data}}),(function(e){return{loadShapers:function(t,a){return e(ja(t,a))},loadBoards:function(t,a){return e(Aa(t,a))}}}))(Da),xa=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).processFormSubmission=function(e){var t=e.serialized,a=(e.fields,e.form,n.props),s=a.session,r=a.createUserBoard,o=n.state.images;return new Promise((function(e,a){if(s.isLoggedIn){var n=it.createFormRequest(t);o.forEach((function(e,t){n.append("photo",e)})),r(s,{data:n}),e(n)}else a("user not logged in ")}))},n.handleInputChanges=function(e){e.preventDefault(),n.setState(Object(ye.a)({},e.currentTarget.name,e.currentTarget.value))},n.state={submitSuccess:!1,submitFail:!1,errorMessage:null,images:[]},n.onDrop=n.onDrop.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"onDrop",value:function(e,t){this.setState({images:this.state.images.concat(e)})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.props.noUpdate||e.user_boards.data.length!==this.props.user_boards.data.length&&this.props.user_boards.created&&(this.setState({submitSuccess:!0}),setTimeout((function(){if(n.props.onSubmissionComplete){var e=n.props.user_boards.created.id;n.props.onSubmissionComplete(e)}else n.props.history.push("/board")}),1500))}},{key:"render",value:function(){var e=this.state,t=e.submitSuccess,a=e.submitFail,s=e.loading,r=e.errorMessage;return n.createElement(Ze,{returnToIndex:this.props.close},n.createElement("div",{className:"col-md-12 "},n.createElement("h2",null,"Create Board"),!t&&n.createElement("div",{className:"alert alert-info",role:"alert"},"Fill the form below to create a new post"),t&&n.createElement("div",{className:"alert alert-info",role:"alert"},"The form was successfully submitted!"),a&&n.createElement("div",{className:"alert alert-info",role:"alert"},r),n.createElement(Ra,{board:this.state.board,handleInputChanges:this.handleInputChanges,processFormSubmission:this.processFormSubmission,loading:s,onDrop:this.onDrop})))}}]),a}(n.Component),Ta=Object(i.b)((function(e){return{session:e.session,user_boards:e.user_boards}}),(function(e){return{createUserBoard:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_BOARD_CREATED",payload:e}}(e)}});a(new it(e).create(s))}}(t,a))},clearCreatedBoard:function(){return e({type:"USER_BOARD_CREATED_CLEARED"})}}}))(Object(Ce.g)(xa)),Ua=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({show:!0})},n.hideModal=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({show:!1})},n.state={select:{id:0,name:"No Board Selected"},selectOptions:[],defaultImage:"/img/board_default_lg.png",board_id:e.board_id,selectedBoard:{},show:!1},n.hideModal=n.hideModal.bind(Object(Fe.a)(n)),n.showModal=n.showModal.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn&&(this.setState({board_id:this.props.board_id,selectedBoard:this.props.current_session.UserBoard}),this.props.current_session.board_id&&this.props.loadBoard(this.props.session,{id:this.props.current_session.board_id,withs:["UserBoardImage"]}))}},{key:"componentDidUpdate",value:function(e,t,a){if(e.current_session.board_id!==this.props.board_id||!1!==this.props.board_created){var n=this.props.board_created?this.props.board_created.id:this.props.board_id;this.props.clearCreatedBoard(),this.props.onChange(n),this.props.loadBoard(this.props.session,{id:n,withs:["UserBoardImage"]})}}},{key:"render",value:function(){var e=this,t=this.props.current_session,a=this.props.session.user.id===this.props.user_board.user_id,s=this.props.user_board&&this.props.user_board.UserBoardImages&&this.props.user_board.UserBoardImages.length?ie+this.props.user_board.UserBoardImages[0].name:this.state.defaultImage;return n.createElement("div",{className:this.props.wrapperClass+" "},n.createElement("div",{className:"container"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement("strong",null,"Board:")),n.createElement("div",{className:"col-5"},n.createElement("img",{style:{cursor:"pointer"},onClick:function(){return e.props.history.push("/board/"+t.board_id)},src:s,alt:this.props.user_board.name})),n.createElement("div",{className:"col-7"},n.createElement("div",{className:a?"board-select row":"board-select-disabled row"},n.createElement(Ea.a,{type:ba.InputType.Select,value:this.props.user_board.name||"Select A Board",defaultValue:this.props.user_board.name,onChange:this.props.onChange,options:this.props.boards,valueKey:"id",labelKey:"name",editClass:"form-control"})),this.props.user_board&&n.createElement("div",{className:"board-picker-line"},n.createElement(Ut,{stars:this.props.user_board.rating,onClick:this.submitUpdate,size:"xs",static:!0})),this.props.user_board&&n.createElement("div",{className:"board-picker-line"},"Size:",this.props.user_board.size),a&&n.createElement("div",{className:"board-picker-line"},n.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showModal},"New Board"))),n.createElement(sa,{show:this.state.show},n.createElement(Ta,{onSuccess:function(t){return e.hideModal(t)},onSubmissionComplete:this.hideModal,close:this.hideModal})))))}}]),a}(n.Component),Ba=Object(i.b)((function(e){return{session:e.session,current_session:e.user_sessions.selected,board_created:e.user_boards.created,user_board:e.user_boards.selected}}),(function(e){return{loadBoard:function(t,a){return e(pt(t,a))},clearCreatedBoard:function(){return e({type:"USER_BOARD_CREATED_CLEARED"})}}}))(Object(Ce.g)(Ua)),Pa=a(153),La=a(307),Ma=a.n(La),Fa=function(e){var t=e.session;return s.a.createElement("div",{className:"card conditions"},s.a.createElement("strong",null,"Conditions"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("div",null,"Water Temp: ",t.SessionDatum.water_temperature,"F"),s.a.createElement("div",null,"Swell Height: ",t.SessionDatum.swell_height,"ft"),s.a.createElement("div",null,"Swell Period: ",t.SessionDatum.swell_period,"s"),s.a.createElement("div",null,"Wave Height: ",t.SessionDatum.wave_height,"ft")),s.a.createElement("div",{className:"col-6"},s.a.createElement("div",null,"Wave Period: ",t.SessionDatum.wave_period,"s"),s.a.createElement("div",null,"Pressure: ",t.SessionDatum.pressure,"in"),s.a.createElement("div",null,"Wind Speed: ",t.SessionDatum.wind_speed,"k"))))},za={session:["Location","UserBoard.UserBoardImage","SessionData"]},Ya=function(e){Object(E.a)(n,e);var t=Object(S.a)(n);function n(e){var s;return Object(b.a)(this,n),(s=t.call(this,e)).setSelectedBoard=function(){var e=[{id:0,name:"select"}],t=s.state.select;s.props.boards.map((function(a){var n={id:a.id,name:a.name};return a.id===s.props.current_session.board_id&&(t=n),e.push(n)})),s.setState({selectOptions:e,select:t})},s.returnToIndex=function(e){s.props.history.length>1?s.props.history.goBack():s.props.history.push("/user/dashboard")},s.submitUpdate=function(e){s.props.editUserSession(s.props.session,{id:s.props.match.params.id,data:e}),s.setState(e)},s.onLocationChange=function(e,t){if(t){var a=[];a[e]=t,s.submitUpdate(Object(d.a)({},a))}},s.onPrivacyChange=function(e){e.nextValue!==s.state.is_public&&(s.setState({is_public:e.nextValue}),s.submitUpdate({is_public:e.nextValue}))},s.onBoardChange=function(e){if(e){s.submitUpdate({board_id:e});var t=parseInt(e);s.state.selectOptions.map((function(e){return e.id===t&&s.setState({select:e}),!0}))}},s.onImageLoad=function(e){s.setState({selectedImage:s.props.session_images[0]})},s.onImageSelected=function(e){s.setState({selectedImage:s.props.session_images[e],imageIndex:e})},s.deleteImage=function(e){new Promise((function(e,t){e(s.props.deleteSessionImage(s.props.session,s.state.selectedImage.id))})).then((function(e){var t=0===s.state.imageIndex?0:s.state.imageIndex-1;s.setState({imageIndex:t,selectedImage:s.props.session_images[t]})}))},s.onDateChange=function(e){var t=u()(e).format("YYYY-MM-DD HH:mm:ss");s.submitUpdate({session_date:t}),s.setState({date:e})},s.loadNoaa=function(){var e=a(85).inspect,t={listLatLon:"38.99,-77.01 37.7833,-122.4167",begin:u()().format("YYYY-MM-DDTHH:mm:ss"),end:u()().add(3,"days").format("YYYY-MM-DDTHH:mm:ss"),qpf:"qpf",pop12:"pop12"};va.a.setToken("yPMNDtzDeHIgQPxhrkzuKJHGKlzGkSQV"),va.a.getForecast(t).then((function(t){console.log(e(t,{colors:!0,depth:1/0}))}))},s.UserSessionRequest=new lt(e.session),s.state={boards:[],select:{id:0,name:"No Board Selected"},selectedImage:null,selectOptions:[],uploaderInstance:1,imageIndex:0,date:"",is_public:null},s.onDrop=s.onDrop.bind(Object(Fe.a)(s)),s}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn?(this.props.loadBoards(this.props.session,{orderBy:"name_ASC",limit:50,wheres:{user_id:this.props.session.user.id}}),this.props.loadSession(this.props.session,{id:this.props.match.params.id,withs:za.session}),this.props.loadSessionImages(this.props.session,{wheres:{session_id:this.props.match.params.id}})):this.props.history.push("/session")}},{key:"onDrop",value:function(e,t){if(e.length){var a=lt.createFormRequest({session_id:this.props.current_session.id,user_id:this.props.session.user.id});e.forEach((function(e,t){a.append("photo",e)})),this.props.addImages(this.props.session,{data:a}),this.setState({uploaderInstance:this.state.uploaderInstance+1})}}},{key:"componentDidUpdate",value:function(e,t,a){(this.props.boards.length&&!this.state.selectOptions.length&&this.props.current_session.id||e.boards.length!==this.props.boards.length)&&this.setSelectedBoard()}},{key:"componentWillUnmount",value:function(){this.props.clearSession()}},{key:"render",value:function(){var e=this.props.current_session,t=this.props.session.user.id===e.user_id;return s.a.createElement(He,null,s.a.createElement(Pa.FacebookProvider,{appId:Ma.a.api_key},s.a.createElement(Ze,{returnToIndex:this.returnToIndex},s.a.createElement(Vt.Form,null,s.a.createElement("div",{className:t?"container owner":"container"},s.a.createElement("div",{className:"details row"},s.a.createElement("div",{className:"col-7 session-title"},s.a.createElement(da.RIEInput,{required:!1,value:e.title||"",defaultValue:e.title,change:this.submitUpdate,propName:"title",editProps:{disabled:!t},className:"form-control"})),s.a.createElement("div",{className:"col-5",style:{textAlign:"right"}},s.a.createElement("img",{src:"/img/LogoMakr_4GvwRg.png",style:{height:"50px"}}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-7"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6 align-middle"},s.a.createElement(Ut,{stars:e.rating,onClick:this.submitUpdate,size:"1x",static:!t})),s.a.createElement("div",{className:"col-6"},t&&s.a.createElement("div",{className:"privacy text-right"},s.a.createElement(Wt.Radio,{name:"is_public",label:"Private",value:"0",onChange:this.onPrivacyChange,checked:e.id&&!0!==e.is_public}),s.a.createElement(Wt.Radio,{name:"is_public",label:"Public",value:"1",onChange:this.onPrivacyChange,checked:e.is_public&&!0===e.is_public})))),s.a.createElement("div",{className:"row preview"},s.a.createElement(Ve.a,{size:"lg",alt:"delete user",style:{marginLeft:".5em",float:"left",cursor:"pointer",position:"absolute",top:"1em",zIndex:"999",color:"white",left:"1em"},icon:We.d,onClick:this.deleteImage,value:this.state.imageIndex}),t&&s.a.createElement(gt.a,{key:this.state.uploaderInstance,withIcon:!1,buttonText:"+",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".gif",".png",".gif"],maxFileSize:5242880,withPreview:!1,withLabel:!1,buttonClassName:"upload-btn",style:{marginLeft:".5em",float:"left",cursor:"pointer",position:"absolute",top:"0",zIndex:"999",color:"white",left:"3em"}}),s.a.createElement("div",null,s.a.createElement(fa.a,{items:this.props.session_images,showBullets:!0,showIndex:!0,startIndex:this.state.imageIndex,onSlide:this.onImageSelected,onImageLoad:this.onImageLoad,thumbnailPosition:"bottom"})),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-text"},s.a.createElement(Pa.Page,{href:window.location.href,tabs:"timeline"}),s.a.createElement(Pa.Comments,{href:window.location.href}))))),s.a.createElement("div",{className:"details col-5"},s.a.createElement("div",null,s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"detail-line"},s.a.createElement(pa.a,{disabled:!t,selected:this.state.date,className:"date-picker-input form-control",onChange:this.onDateChange,showTimeSelect:!0,dateFormat:"MMMM d yyyy h:mm a",placeholderText:u()(e.session_date).format("MMMM D YYYY h:mm a")})),s.a.createElement("div",{className:"detail-line"},s.a.createElement(Xt,{disabled:!t,id:"location_id",name:"location_id",className:"form-control",onChange:this.onLocationChange,onBlur:this.onLocationBlur,value:e.location_id,disable:!t,placeholder:e.Location?e.Location.formatted_address:"No Location Specified"}))),e.SessionDatum&&s.a.createElement("div",{className:"detail-line"},s.a.createElement(Fa,{session:e})),s.a.createElement("div",{className:"card"},s.a.createElement(Ba,{onChange:this.onBoardChange,boards:this.state.selectOptions,board_id:e.board_id,wrapperClass:"row detail-line"})),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"detail-line"},s.a.createElement("div",null,s.a.createElement("strong",null,"Notes:")),s.a.createElement(da.RIETextArea,{value:e.notes||"You have no notes for this session",className:"form-control text-area",defaultValue:e.notes,change:this.submitUpdate,propName:"notes",validate:ua.a.isString,editProps:{disabled:!t}})))))))))))}}]),n}(n.Component),Ga=Object(i.b)((function(e){return{session:e.session,current_session:e.user_sessions.selected,boards:e.user_boards.data,session_images:e.session_images,api:e.api}}),(function(e){return{loadSession:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_SESSION_LOADED",payload:e}}(e)}});a(new lt(e).getOne(s))}}(t,a))},loadBoards:function(t,a){return e(ht(t,a))},clearSession:function(){return e({type:"USER_SESSION_CLEARED",payload:null})},editUserSession:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_SESSION_UPDATED",payload:e}}(e)}});a(new lt(e).update(s))}}(t,a))},loadSessionImages:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_SESSION_IMAGES_LOADED",payload:e}}(e)}});a(new lt(e).getImages(s))}}(t,a))},addImages:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_SESSION_IMAGES_CREATED",payload:e}}(e)}});a(new lt(e).createImages(s))}}(t,a))},deleteSessionImage:function(t,a){return e(function(e,t){return function(a,n){var s={id:t,onSuccess:function(e){return function(e){return{type:"USER_SESSION_IMAGE_DELETED",payload:e}}(t)}};a(new lt(e).deleteImage(s))}}(t,a))}}}))(Ya),Ha={user_board:["Board.Manufacturer","UserBoardImage"]},Va=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).boardCreated=function(e){n.props.clearCreatedBoard(),n.viewBoard(e)},n.showModal=function(){n.setState({show:!0})},n.hideModal=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&e.preventDefault(),n.setState({show:!1})},n.setScope=function(e){var t=[{match:{user_id:n.props.userSession.user.id}}];if(1===parseInt(e.nextValue)){t.push({match:{is_public:1}})}n.setState({filters:t,showAll:parseInt(e.nextValue),mlVal:[]})},n.onSortUpdated=function(e,t){for(var a="",s=0,r=Object.entries(t.sort[0]);s<r.length;s++){var o=Object(_.a)(r[s],2),i=o[0],l=o[1];a="".concat(i,"_").concat(l.order)}n.setState({selectedSortOrder:a})},n.elasticResultHandler=function(e){var t=[];e.data.forEach((function(e){t.push(e.id)})),t.length?n.props.loadBoards(n.props.userSession,{orderBy:n.state.selectedSortOrder,wheres:{in:t.join(",")},withs:Ha.user_board,limit:12}):n.props.clearBoards()},n.state={show:!1,selectedSortOrder:"created_at_DESC",showAll:0,filters:[{match:{user_id:e.userSession.user.id}}],mlVal:[]},n.deleteBoard=n.deleteBoard.bind(Object(Fe.a)(n)),n.editBoard=n.editBoard.bind(Object(Fe.a)(n)),n.viewBoard=n.viewBoard.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){L().then((function(e){return console.log("refresh data",e)})),this.props.userSession.isLoggedIn}},{key:"componentWillUnmount",value:function(){this.props.clearBoards()}},{key:"deleteBoard",value:function(e){var t=this;Object(Ke.confirmAlert)({title:"Confirm To Delete",message:"Are you sure you want to delete this userSession?",buttons:[{label:"Yes",onClick:function(){t.props.deleteBoard(t.props.userSession,e)}},{label:"No",onClick:function(){}}]})}},{key:"editBoard",value:function(e){this.props.history.push("/board/edit/"+e)}},{key:"viewBoard",value:function(e){this.props.history.push("/board/"+e)}},{key:"render",value:function(){var e=this,t=this.showModal;return s.a.createElement(He,null,s.a.createElement(ra.b,{app:Ht.a.user_boards_index,url:Ht.a.host,credentials:Ht.a.credentials},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"container card card-lg mx-auto"},s.a.createElement("div",{className:"card-title"},s.a.createElement("h2",null,"Boards",s.a.createElement("button",{onClick:this.showModal,className:"btn btn-sm btn-outline-secondary float-right"},"Create New Board"))),s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row col-12"},s.a.createElement("div",{className:"col-2"}),s.a.createElement("div",{className:"col-10"},s.a.createElement("span",{className:"float-right"}))),s.a.createElement("div",{className:"row col-12"},s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"col-3"}),s.a.createElement("div",{className:"col-9"},s.a.createElement(ra.d,{innerClass:{button:"btn btn-primary"}}))),s.a.createElement("div",{className:"col-3"},s.a.createElement("div",{className:"detail-line is_public_radio"},s.a.createElement(Vt.Form,null,s.a.createElement(Wt.Radio,{name:"is_public",label:"Mine",value:"0",onChange:this.setScope,checked:0===parseInt(this.state.showAll)}),s.a.createElement(Wt.Radio,{className:"is_public_radio",name:"is_public",label:"Mine + Public",value:"1",onChange:this.setScope,checked:1===parseInt(this.state.showAll)}))),s.a.createElement("div",{className:"filter-widgets",id:"sessions"},s.a.createElement(ra.a,{componentId:"manufacturers",dataField:"manufacturer",title:"Manufacturers",innerClass:{label:"elastic-facet-label"},onError:this.setValues,react:{and:["models"],or:["board_list"]},defaultQuery:function(){return{query:{bool:{should:e.state.filters}}}}}),s.a.createElement(ra.a,{componentId:"models",dataField:"model",innerClass:{label:"elastic-facet-label",input:"form-control"},title:"Models",react:{and:["manufacturers"],or:["board_list"]},renderNoResults:function(){return s.a.createElement("p",null,"No Results Found!")},onChange:console.log("query changed",this.state.filters),defaultQuery:function(){return{query:{bool:{should:e.state.filters}}}}}))),s.a.createElement("div",{className:"col-7"},s.a.createElement("div",{className:"row"},s.a.createElement(ra.c,{componentId:"board_list",dataField:"id",onData:this.elasticResultHandler,onQueryChange:this.onSortUpdated,defaultQuery:function(){return{query:{bool:{should:e.state.filters}}}},renderResultStats:function(e){return s.a.createElement("div",{className:"elastic-meta"},e.numberOfResults+" Results Sorted By")},className:"col-12",react:{and:["models","manufacturers"]},pagination:!0,size:12,infiniteScroll:!0,innerClass:{pagination:"elastic-paginate",sortOptions:"form-control elastic-sort"},renderNoResults:function(){return s.a.createElement("div",{className:"alert alert-primary text-center index-empty-resultset"},s.a.createElement("div",null,"You Haven't Created Any Boards Yet"),s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:t},"Get Started!")))},sortOptions:[{dataField:"id",sortBy:"desc",label:"Newest To Oldest"},{dataField:"id",sortBy:"asc",label:"Oldest To Newest"},{dataField:"name",sortBy:"asc",label:"Name A->Z"},{dataField:"name",sortBy:"desc",label:"Name Z->A"},{dataField:"rating",sortBy:"asc",label:"Rating 1-10"},{dataField:"rating",sortBy:"desc",label:"Rating 10-1"}],paginationAt:"both",render:function(t){t.data;return e.props.boards&&e.props.boards.map((function(t){return s.a.createElement("div",{key:t.id,className:"col-md-12 col-sm-12"},s.a.createElement(Lt,{board:t,deleteBoard:e.deleteBoard,viewBoard:e.boardCreated,editBoard:e.editBoard,isOwner:t.user_id===e.props.userSession.user.id}))}))}}))),s.a.createElement("div",{className:"col-2"},s.a.createElement("div",{className:"index-sidecard"},s.a.createElement("img",{className:"align-left",src:"/img/LogoMakr_4GvwRg.png",alt:"glazewave"})),s.a.createElement("div",{className:"index-sidecard"},s.a.createElement(Tt,null)),s.a.createElement("div",{className:"index-sidecard"},s.a.createElement(Dt,null)))),s.a.createElement("div",{className:"row col-12"},s.a.createElement("div",{className:"col-6"}),s.a.createElement("div",{className:"col-6"},s.a.createElement("span",{className:"float-right"})))))))),s.a.createElement(sa,{show:this.state.show,handleClose:function(t){return e.hideModal(t)}},s.a.createElement(Ta,{onSuccess:function(t){return e.hideModal(t)},onSubmissionComplete:this.viewBoard,close:this.hideModal})))}}]),a}(n.Component),Wa=Object(i.b)((function(e){return{userSession:e.session,boards:e.user_boards.data}}),(function(e){return{loadBoards:function(t,a){return e(ht(t,a))},deleteBoard:function(t,a){return e(function(e,t){return function(a,n){var s={id:t,onSuccess:function(e){return function(e){return{type:"USER_BOARD_DELETED",payload:e}}(t)}};a(new it(e).delete(s))}}(t,a))},clearBoards:function(){return e(mt())},clearCreatedBoard:function(){return e({type:"USER_BOARD_CREATED_CLEARED"})}}}))(Va),qa=(a(1010),["4'6","4'7","4'8","4'9","4'10","4'11","5'0","5'1","5'2","5'3","5'4","5'5","5'6","5'7","5'8","5'9","5'10","5'11","6'0","6'1","6'2","6'3","6'4","6'5","6'6","6'7","6'8","6'9","6'10","6'11","7'0","7'1","7'2","7'3","7'4","7'5","7'6","7'7","7'8","7'9","7'10","7'11","8'0","8'1","8'2","8'3","8'4","8'5","8'6","8'7","8'8","8'9","8'10","8'11","9'0","9'1","9'2","9'3","9'4","9'5","9'6","9'7","9'8","9'9","9'10","9'11","10'0","10'1","10'2","10'3","10'4","10'5","10'6","10'7","10'8","10'9","10'10","10'11","11'0","11'1","11'2","11'3","11'4","11'5","11'6","11'7","11'8","11'9","11'10","11'11","12'0","12'1","12'2","12'3","12'4","12'5","12'6","12'7","12'8","12'9","12'10","12'11"]),Ka={user_session:["Location","SessionImage"],selected_board:["Board.Manufacturer","Session.SessionImage","Session.UserBoard"],shapers:["Board"],boards:["Manufacturer"]},Qa=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).prepBoardSizeOptions=function(e){var t=[];return e.forEach((function(e){return t.push({id:e})})),t},n.onTypeAheadSelected=function(e,t){var a=[];if(a[e]=t,"manufacturer_id"===e){var s=Number.isInteger(n.state.board_id)?n.state.board_id:n.props.board.id,r=n.props.boards.find((function(e){return e.id===s}));r&&r.manufacturer_id!==t&&(a.board_id="",a.modelPlaceholder="Choose A Board")}n.setState(Object(d.a)({},a))},n.getShaperSuggestions=function(e,t){if(!e||"type_ahead_focused"===t)return n.props.shapers;var a=e.trim().toLowerCase(),s=a.length;return 0===s?[]:n.props.shapers.filter((function(e){return e.name.toLowerCase().slice(0,s)===a}))},n.getBoardSuggestions=function(e,t){if(!e||"type_ahead_focused"===t){var a=""===n.state.manufacturer_id?n.props.board.Board.manufacturer_id:n.state.manufacturer_id;return n.props.boards.filter((function(e){return e.manufacturer_id===a}))}var s=e.trim().toLowerCase(),r=s.length;return 0===r?[]:n.props.boards.filter((function(e){return e.model.toLowerCase().slice(0,r)===s&&e.manufacturer_id===n.state.manufacturer_id}))},n.submitUpdate=function(e){n.props.editUserBoard(n.props.session,{id:n.props.match.params.id,data:e}),n.setState(e)},n.returnToIndex=function(e){n.props.history.length>1?n.props.history.goBack():n.props.history.push("/board")},n.onImageLoad=function(e){n.setState({selectedImage:n.props.images[0]})},n.onImageSelected=function(e){n.setState({selectedImage:n.props.images[e],imageIndex:e})},n.deleteImage=function(e){new Promise((function(e,t){e(n.props.deleteBoardImage(n.props.session,n.state.selectedImage.id))})).then((function(e){var t=0===n.state.imageIndex?0:n.state.imageIndex-1;n.setState({imageIndex:t,selectedImage:n.props.images[t]})}))},n.state={session:[],board_id:"",manufacturer_id:"",uploaderInstance:1,imageIndex:0,modelPlaceholder:null,boardSizeOptions:n.prepBoardSizeOptions(qa),isDisabled:!0},n.onDrop=n.onDrop.bind(Object(Fe.a)(n)),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){this.props.session.isLoggedIn?(this.props.loadBoard(this.props.session,{id:this.props.match.params.id,withs:Ka.selected_board}),this.props.loadSessions(this.props.session,{wheres:{board_id:this.props.match.params.id},withs:Ka.user_session}),this.props.loadBoards(this.props.session,{limit:1e3,withs:Ka.boards}),this.props.loadShapers(this.props.session,{withs:Ka.shapers}),this.props.loadBoardImages(this.props.session,{wheres:{user_board_id:this.props.match.params.id}})):this.props.history.push("/board")}},{key:"onDrop",value:function(e,t){if(e.length){var a=it.createFormRequest({user_board_id:this.props.board.id,user_id:this.props.session.user.id});e.forEach((function(e,t){a.append("photo",e)})),this.props.addImages(this.props.session,{data:a}),this.setState({uploaderInstance:this.state.uploaderInstance+1})}}},{key:"render",value:function(){var e=this,t=this.props.board,a=this.props.board.user_id===this.props.session.user.id;console.log("isOwner",a);var n=this.state.modelPlaceholder?this.state.modelPlaceholder:t.Board?t.Board.model:"Choose A Model";return s.a.createElement(He,null,s.a.createElement(Ze,{returnToIndex:this.returnToIndex},s.a.createElement(Vt.Form,null,s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"details row"},s.a.createElement("div",{className:"col-6 session-title"},s.a.createElement(da.RIEInput,{required:!1,value:t.name||"",defaultValue:t.name,change:this.submitUpdate,propName:"name",editProps:{disabled:!a},className:"form-control"})),s.a.createElement("div",{className:"col-6"})),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"preview col-6"},s.a.createElement(Ve.a,{size:"lg",alt:"delete user",style:{marginLeft:".5em",float:"left",cursor:"pointer",position:"absolute",top:"1em",zIndex:"999",color:"white",left:"1em"},icon:We.d,onClick:this.deleteImage,value:this.state.imageIndex}),s.a.createElement(gt.a,{key:this.state.uploaderInstance,withIcon:!1,buttonText:"+",onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".png"],maxFileSize:5242880,withPreview:!1,withLabel:!1,buttonClassName:"upload-btn",style:{marginLeft:".5em",float:"left",cursor:"pointer",position:"absolute",top:"0",zIndex:"999",color:"white",left:"3em"}}),s.a.createElement("div",null,s.a.createElement(fa.a,{items:this.props.images,showBullets:!0,showIndex:!0,startIndex:this.state.imageIndex,onSlide:this.onImageSelected,showNav:!1,onImageLoad:this.onImageLoad}))),s.a.createElement("div",{className:"details col-md-6"},s.a.createElement("div",{className:"detail-line"},s.a.createElement(Ut,{stars:t.rating,onClick:this.submitUpdate,size:"1x",static:!a})),s.a.createElement("div",{className:"detail-line"},s.a.createElement("strong",null,"Size:"),"\xa0",s.a.createElement(Ea.a,{type:ba.InputType.Select,value:t.size||"Select A Size",onChange:function(t){e.submitUpdate({size:t})},options:this.state.boardSizeOptions,valueKey:"id",labelKey:"id",editClass:"form-control",isDisabled:0})),s.a.createElement("div",{className:"detail-line"},s.a.createElement("div",null,s.a.createElement("strong",null,"Shaper/Company:")),s.a.createElement(Na,{entity:this.props.shapers,name:"manufacturer_id",keyName:"name",className:"form-control",placeholder:t.Board&&t.Board.Manufacturer?t.Board.Manufacturer.name:"Choose A Shaper",value:this.state.manufacturer_id,setValue:this.onTypeAheadSelected,getSuggestions:this.getShaperSuggestions,display:!0,disabled:!a})),s.a.createElement("div",{className:"detail-line"},s.a.createElement("div",null,s.a.createElement("strong",null,"Model:")),s.a.createElement(Na,{entity:this.props.boards,name:"board_id",keyName:"model",className:"form-control",placeholder:n,value:this.state.board_id,setValue:this.onTypeAheadSelected,getSuggestions:this.getBoardSuggestions,display:!0,disabled:!a})),s.a.createElement("div",{className:"detail-line"},s.a.createElement("div",null,s.a.createElement("strong",null,"Notes:")),s.a.createElement(da.RIETextArea,{value:t.notes||"You have no notes for this board",defaultValue:t.notes,className:"form-control text-area",change:this.submitUpdate,propName:"notes",validate:ua.a.isString,editProps:{disabled:!a}}))))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row col-12",style:{marginTop:"1em"}},s.a.createElement("h5",null,"Used In Sessions...")),s.a.createElement("div",{className:"row col-12"},t.Sessions&&t.Sessions.reduce((function(e,t,a){return a<3&&e.push(s.a.createElement("div",{className:"col-md-4",key:a},s.a.createElement(Bt,{session:t,key:t.id}))),e}),[]),(!t.Sessions||0===t.Sessions.length)&&s.a.createElement("div",{className:"col-12"},s.a.createElement("h3",null,"No Sessions found at the moment")))))))}}]),a}(n.Component),Ja=Object(i.b)((function(e){return{session:e.session,board:e.user_boards.selected,boards:e.boards.data,shapers:e.shapers.data,images:e.user_board_images}}),(function(e){return{loadBoard:function(t,a){return e(pt(t,a))},loadSessions:function(t,a){return e(ut(t,a))},loadShapers:function(t,a){return e(ja(t,a))},loadBoards:function(t,a){return e(Aa(t,a))},editUserBoard:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_BOARD_UPDATED",payload:e}}(e)}});a(new it(e).update(s))}}(t,a))},loadBoardImages:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_BOARD_IMAGES_LOADED",payload:e}}(e)}});a(new it(e).getImages(s))}}(t,a))},addImages:function(t,a){return e(function(e,t){return function(a,n){var s=Object(d.a)(Object(d.a)({},t),{onSuccess:function(e){return function(e){return{type:"USER_BOARD_IMAGES_CREATED",payload:e}}(e)}});a(new it(e).createImages(s))}}(t,a))},deleteBoardImage:function(t,a){return e(function(e,t){return function(a,n){var s={id:t,onSuccess:function(e){return function(e){return{type:"USER_BOARD_IMAGE_DELETED",payload:e}}(t)}};a(new it(e).deleteImage(s))}}(t,a))}}}))(Qa),Xa=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"componentWillUpdate",value:function(){this.props.api.authorized||F()}},{key:"render",value:function(){return n.createElement("div",null,n.createElement(De,{session:this.props.session,username:this.props.user.first_name}),n.createElement(Ce.d,null,n.createElement(Ce.b,{path:"/",exact:!0,component:Pe}),n.createElement(Ce.b,{path:"/login",exact:!0,component:Me}),n.createElement(Ce.b,{path:"/logout",exact:!0,component:Pe}),n.createElement(xe,{path:"/user",exact:!0,component:Je,session:this.props.session}),n.createElement(xe,{path:"/user/create",exact:!0,component:tt,session:this.props.session}),n.createElement(xe,{path:"/user/dashboard",exact:!0,component:Yt,session:this.props.session}),n.createElement(xe,{path:"/user/edit/:id",exact:!0,component:ot,session:this.props.session}),n.createElement(Ce.b,{path:"/session",exact:!0,component:la}),n.createElement(xe,{path:"/session/create",exact:!0,component:na,session:this.props.session}),n.createElement(Ce.b,{path:"/session/:id",exact:!0,component:Ga}),n.createElement(Ce.b,{path:"/board",exact:!0,component:Wa}),n.createElement(xe,{path:"/board/create",exact:!0,component:Ta,session:this.props.session}),n.createElement(Ce.b,{path:"/board/:id",exact:!0,component:Ja}),n.createElement(Ce.b,{component:Ue})))}}]),a}(n.Component),Za=Object(Ce.g)(Object(i.b)((function(e){return{session:e.session,user:e.user,api:e.api}}))(Xa));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(i.a,{store:je},s.a.createElement(Ae.a,null,s.a.createElement(Za,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},161:function(e,t){},233:function(e,t,a){},236:function(e,t,a){},28:function(e,t,a){a(74).config(),e.exports={host:"https://glazewave.com",port:""}},297:function(e,t,a){a(74).config(),e.exports={api_key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AWS_DEFAULT_REGION:"us-east-1",REACT_APP_AWS_COGNITO_USER_POOL:"us-east-1_y260v7f9r",REACT_APP_AWS_COGNITO_USER_POOL_BASE_URI:"https://glazewave.auth.us-east-1.amazoncognito.com",REACT_APP_AWS_COGNITO_CLIENT_ID:"3k564gdu8cp3aj7iu8tadujs1v",REACT_APP_AWS_COGNITO_CALLBACK_URI:"https://glazewave.com/login",REACT_APP_AWS_COGNITO_SIGNOUT_URI:"https://glazewave.com/logout",REACT_APP_AWS_S3_ROOT:"https://glazewave.s3.amazonaws.com/",REACT_APP_API_HOST:"https://glazewave.com",REACT_APP_API_BASE:"https://glazewave.com",REACT_APP_API_PORT:"",REACT_APP_ENV:"PROD",REACT_APP_WORLD_WEATHER_KEY:"d83ea85d7b8b4e4aa71161416200506",REACT_APP_ALGOLIA_APP_ID:"6OW1B8K1KD",REACT_APP_ALGOLIA_CLIENT_SECRET:"b541757295fac3492ed3a1041a5ed003",REACT_APP_FACEBOOK_APP_ID:"709331856468025",REACT_APP_ELASTIC_HOST:"https://glazewave-zyizujb-arc.searchbase.io",REACT_APP_ELASTIC_CREDS:"620d99014608:bc204cda-6599-4c86-92e1-ce8c516eb9d0",REACT_APP_ELASTIC_SESSIONS_INDEX:"sessions",REACT_APP_ELASTIC_USER_BOARDS_INDEX:"user_boards"}).REACT_APP_GOOGLE_API_KEY}},307:function(e,t,a){a(74).config(),e.exports={api_key:"709331856468025"}},338:function(e,t,a){e.exports=a(1011)},750:function(e,t,a){},751:function(e,t,a){},752:function(e,t,a){},758:function(e,t,a){},762:function(e,t,a){},780:function(e,t,a){},80:function(e,t,a){a(74).config(),e.exports={host:"https://glazewave-zyizujb-arc.searchbase.io",credentials:"620d99014608:bc204cda-6599-4c86-92e1-ce8c516eb9d0",sessions_index:"sessions",user_boards_index:"user_boards"}},836:function(e,t,a){},855:function(e,t){},857:function(e,t){},871:function(e,t){},873:function(e,t){},910:function(e,t,a){}},[[338,1,2]]]);
//# sourceMappingURL=main.1957efd5.chunk.js.map